INSTDIR=/usr/opt/daq
DESTROOT=/usr/opt/daq/Readout
#
#  Makefile to build a readout program given the stuff in the standard
#  skeleton.
#

SPECTRO_FLAGS=$(shell $(INSTDIR)/../spectrodaq/bin/spectrodaq-conf --cflags)
SPECTRO_LDFLAGS=$(shell $(INSTDIR)/../spectrodaq/bin/spectrodaq-conf --libs)
VMEDEVICE=$(shell $(INSTDIR)/Bin/VmeDevice)


SBSBIT3LIBS= -lVmeAPI -lbtp
NSCLBIT3LIBS=-lVmeAPI

CC = gcc
INCLUDEDIR=-I. -I$(INSTDIR)/Include -I$(DESTROOT)/Include \
	   -I/usr/local/include 

LDFLAGS=-L$(INSTDIR)/Lib -L$(DESTROOT)/Lib -lReadout $(SPECTRO_LDFLAGS) \
	$($(VMEDEVICE)LIBS) 
COMMONSW= -c    -D__unix__ -D_NEED_BOOL_T $(SPECTRO_FLAGS) $(INCLUDEDIR)
OPTSW   =  -g $(COMMONSW)	 
NOOPTSW = -g $(COMMONSW)
CPP = g++


PROGOBJS=ReadoutMain.o skeleton.o

all : Program

Program: $(PROGOBJS)
	g++ -o Readout $(PROGOBJS) $(LDFLAGS)

ReadoutMain.o: ReadoutMain.cpp
	$(CPP) $(OPTSW) $<
skeleton.o: skeleton.cpp
	$(CPP) $(NOOPTSW) $<

