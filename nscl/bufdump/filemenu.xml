<?xml version="1.0" encoding="UTF-8"?>


<chapter id="chap3">
    <title>Commands on the File menu</title>
    <para>
        This chapter describes the operations available on the File
        menu:
        <screenshot>
            <screeninfo>The file menu</screeninfo>
            <mediaobject>
                <imageobject><imagedata fileref="filemenu.gif" format="GIF" />
                </imageobject>
                <imageobject><imagedata fileref="filemenu.eps" format="EPS" />
                </imageobject>
            </mediaobject>
        </screenshot>
    </para>
    <para>
        When you have finished reading this chapter you will know how to:
        <itemizedlist>
            <listitem><para>Open a data source</para></listitem>
            <listitem><para>Read a packet definition file</para></listitem>
            <listitem><para>Incorporate a plugin.</para></listitem>
            <listitem><para>Exit the program.</para></listitem>
        </itemizedlist>
    </para>
    <sect1>
        <title>
            <menuchoice>
                <guimenu>File</guimenu>
                <guimenuitem>Open...</guimenuitem>
            </menuchoice>
        </title>
        <para>
            The
            <menuchoice>
                <guimenu>File</guimenu>
                <guimenuitem>Open...</guimenuitem>
            </menuchoice>
            command allows you to open a data source.  Data sources can be
            either online or offline.  An offline data source is just an
            event file, while an online data source is a computer on the
            network that is running the NSCL DAQ software.
        </para>
        <para>
            When you click the
            <menuchoice>
                <guimenu>File</guimenu>
                <guimenuitem>Open...</guimenuitem>
            </menuchoice>
            menu entry, the data source dialog is displayed:
            <screenshot>
                <screeninfo>The data source dialog</screeninfo>
                <mediaobject>
                    <imageobject><imagedata fileref="opencallout.gif" format="GIF" />
                    </imageobject>
                    <imageobject><imagedata fileref="opencallout.eps" format="EPS" />
                    </imageobject>
                    <caption>The data source dialog</caption>
                </mediaobject>
            </screenshot>
            The numbers in the discussion below refer to the
            numbers in the screenshot of the data source dialog:
            <orderedlist numeration="arabic">
                <listitem><para>
                            The top section of the the dialog allows you to
                            select between an online or offline data source by
                            checking or unchecking the <emphasis>Online</emphasis>
                            checkbox.  The appropriate areas of the rest of
                            the dialog are disabled or enabled.  The spinbox to
                            the right of the checkbox allows you to set
                            the buffersize for the data source if you are not
                            using the default NSCL buffersize of8192 bytes.
                          </para>
                </listitem>
                <listitem><para>
                            This section is only enabled if the
                            <emphasis>Online</emphasis>
                            checkbox is checked.  Fill the text box in
                            with the name of the computer on which the online
                            data source (Readout) will be running.
                            In order to use online data sources, you must
                            run bufdump on a system that is running the NSCL
                            data acquisition system.  The host you use as the
                            event source must also be running the NSCL Data
                            data acquisition system.
                          </para>
                </listitem>
                <listitem><para>
                            The Filter entry is part of the offline data source
                            selection area.  It is only enabled if the
                            <emphasis>Online</emphasis>
                            checkbutton is
                            <emphasis>not</emphasis>
                            checked.
                            You can enter a path with wild card characters in
                            the final path element to determine which
                            files will be shown in the file selection part
                            of this area (labelled 5).  The screenshot
                            we are annotating only displays the files with
                            the .evt filetype in the directory
                            H:/Wincluster/DAQDocs/2005a/daq/bufdump.
                            If you navigate the directory hierarchy
                            (via the directory navigation box labelled
                            4), the leading part of this path will automatically
                            change to match the directory you are browsing.
                            After modifying this entry, hit the enter (or return)
                            key to cause the new filter to be applied.
                          </para>
                </listitem>
                <listitem><para>
                            The directory navigation box allows you to navigate
                            the filesystem directory hierarchy.   If the directory
                            you are examining has subdirectories, they will be
                            listed in this box.  You can navigate into a
                            subdirectory by double clicking it.  You can navigate
                            up one level in the hieararchy by double clicking the
                            .. entry in this list.  You can move to a distant
                            part of the file system hiearchy by editing
                            the filter string as described in 3 above.
                          </para>
                </listitem>
                <listitem><para>
                            The file selection box allows you to select a specific
                            event file.  If you click on a file in this
                            box, the full path to the file will be copied to
                            the <emphasis>Selection</emphasis> entry labelled
                            6.
                          </para>
                </listitem>
                <listitem><para>
                            The Selection entry box indicates the name of the
                            offline data source that will be used if you click
                            the <emphasis>Ok</emphasis> button. You may
                            edit this name or select a file in the file
                            selection box (labelled 5).
                          </para>
                </listitem>
                <listitem><para>
                            The action area of the dialog has two buttons.
                            <variablelist>
                                <varlistentry>
                                    <term><guibutton>Ok</guibutton></term>
                                    <listitem>
                                        <para>Accepts the selected
                                        data source and
                                        dismisses the dialog.  Once you
                                        click the
                                        <guibutton>Ok</guibutton>
                                        button, the next buffer button
                                        will cause the next data buffer to
                                        come from this new data source.
                                        Note that any previously open data
                                        source will be closed.
                                        </para>
                                    </listitem>
                                </varlistentry>
                                <varlistentry>
                                    <term><guibutton>Cancel</guibutton></term>
                                    <listitem>
                                        <para>Dismisses the dialog without
                                            changing or opening a new data
                                            source.
                                        </para>
                                    </listitem>
                                </varlistentry>
                            </variablelist>
                        </para>
                </listitem>
            </orderedlist>
        </para>
    </sect1>
    <sect1>
        <title>
            <menuchoice>
                <guimenu>File</guimenu>
                <guimenuitem>Read Packet Defs...</guimenuitem>
            </menuchoice>
        </title>
        <para>
            Packet definition files extend the set of event packets
            that are recognized by the buffer dumper.
            <link linkend="chap2">Chapter 2: Introduction to bufdump concepts
            </link>
            describes packets and packet definition files.
            <link linkend="chap6">Chapter 6: Extending bufdump
            </link>
            describes how to create packet definition files.  Note that
            you only need to use this if bufdump does not recognize some
            of the packets that are in your events.
        </para>
        <para>
            Clicking the
            <menuchoice>
                <guimenu>File</guimenu>
                <guimenuitem>Read Packet Defs...</guimenuitem>
            </menuchoice>
            menu command brings up a simple file chooser dialog. The
            appearance of this dialog will differ from operating system
            to operating system.
            Select the packet definition file you want to read and click
            the appropriate button on the file chooser
        </para>
    </sect1>
    <sect1>
        <title>
            <menuchoice>
                <guimenu>File</guimenu>
                <guimenuitem>Add Plugin...</guimenuitem>
            </menuchoice>
        </title>
        <para>
            The
            <menuchoice>
                <guimenu>File</guimenu>
                <guimenuitem>Add Plugin...</guimenuitem>
            </menuchoice>
            command allows you to incorporate a plugin into the
            bufdump program.  Plugins help bufdump format the
            bodies of recognized packets within an event.
            <link linkend="chap2">Chapter 2: Introduction to bufdump concepts
            </link> describes plugins.
            <link linkend="chap6">Chapter 6: Extending bufdump
            </link>
            describes how to write plugins.
        </para>
    </sect1>
    <sect1>
        <title>
            <menuchoice>
                <guimenu>File</guimenu>
                <guimenuitem>Exit</guimenuitem>
            </menuchoice>
            </title>
        <para>
            Clicking the
            <menuchoice>
            <guimenu>File</guimenu>
            <guimenuitem>Exit</guimenuitem>
        </menuchoice>
        menu command exits the bufdump program.
        </para>
    </sect1>

</chapter>
