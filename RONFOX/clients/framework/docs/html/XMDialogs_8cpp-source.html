<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>XMDialogs.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>XMDialogs.cpp</h1><a href="XMDialogs_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment">                    GNU GENERAL PUBLIC LICENSE</font>
00003 <font class="comment">                       Version 2, June 1991</font>
00004 <font class="comment"></font>
00005 <font class="comment"> Copyright (C) 1989, 1991 Free Software Foundation, Inc.</font>
00006 <font class="comment">                       59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</font>
00007 <font class="comment"> Everyone is permitted to copy and distribute verbatim copies</font>
00008 <font class="comment"> of this license document, but changing it is not allowed.</font>
00009 <font class="comment"></font>
00010 <font class="comment">                            Preamble</font>
00011 <font class="comment"></font>
00012 <font class="comment">  The licenses for most software are designed to take away your</font>
00013 <font class="comment">freedom to share and change it.  By contrast, the GNU General Public</font>
00014 <font class="comment">License is intended to guarantee your freedom to share and change free</font>
00015 <font class="comment">software--to make sure the software is free for all its users.  This</font>
00016 <font class="comment">General Public License applies to most of the Free Software</font>
00017 <font class="comment">Foundation's software and to any other program whose authors commit to</font>
00018 <font class="comment">using it.  (Some other Free Software Foundation software is covered by</font>
00019 <font class="comment">the GNU Library General Public License instead.)  You can apply it to</font>
00020 <font class="comment">your programs, too.</font>
00021 <font class="comment"></font>
00022 <font class="comment">  When we speak of free software, we are referring to freedom, not</font>
00023 <font class="comment">price.  Our General Public Licenses are designed to make sure that you</font>
00024 <font class="comment">have the freedom to distribute copies of free software (and charge for</font>
00025 <font class="comment">this service if you wish), that you receive source code or can get it</font>
00026 <font class="comment">if you want it, that you can change the software or use pieces of it</font>
00027 <font class="comment">in new free programs; and that you know you can do these things.</font>
00028 <font class="comment"></font>
00029 <font class="comment">  To protect your rights, we need to make restrictions that forbid</font>
00030 <font class="comment">anyone to deny you these rights or to ask you to surrender the rights.</font>
00031 <font class="comment">These restrictions translate to certain responsibilities for you if you</font>
00032 <font class="comment">distribute copies of the software, or if you modify it.</font>
00033 <font class="comment"></font>
00034 <font class="comment">  For example, if you distribute copies of such a program, whether</font>
00035 <font class="comment">gratis or for a fee, you must give the recipients all the rights that</font>
00036 <font class="comment">you have.  You must make sure that they, too, receive or can get the</font>
00037 <font class="comment">source code.  And you must show them these terms so they know their</font>
00038 <font class="comment">rights.</font>
00039 <font class="comment"></font>
00040 <font class="comment">  We protect your rights with two steps: (1) copyright the software, and</font>
00041 <font class="comment">(2) offer you this license which gives you legal permission to copy,</font>
00042 <font class="comment">distribute and/or modify the software.</font>
00043 <font class="comment"></font>
00044 <font class="comment">  Also, for each author's protection and ours, we want to make certain</font>
00045 <font class="comment">that everyone understands that there is no warranty for this free</font>
00046 <font class="comment">software.  If the software is modified by someone else and passed on, we</font>
00047 <font class="comment">want its recipients to know that what they have is not the original, so</font>
00048 <font class="comment">that any problems introduced by others will not reflect on the original</font>
00049 <font class="comment">authors' reputations.</font>
00050 <font class="comment"></font>
00051 <font class="comment">  Finally, any free program is threatened constantly by software</font>
00052 <font class="comment">patents.  We wish to avoid the danger that redistributors of a free</font>
00053 <font class="comment">program will individually obtain patent licenses, in effect making the</font>
00054 <font class="comment">program proprietary.  To prevent this, we have made it clear that any</font>
00055 <font class="comment">patent must be licensed for everyone's free use or not licensed at all.</font>
00056 <font class="comment"></font>
00057 <font class="comment">  The precise terms and conditions for copying, distribution and</font>
00058 <font class="comment">modification follow.</font>
00059 <font class="comment"></font>
00060 <font class="comment">                    GNU GENERAL PUBLIC LICENSE</font>
00061 <font class="comment">   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION</font>
00062 <font class="comment"></font>
00063 <font class="comment">  0. This License applies to any program or other work which contains</font>
00064 <font class="comment">a notice placed by the copyright holder saying it may be distributed</font>
00065 <font class="comment">under the terms of this General Public License.  The "Program", below,</font>
00066 <font class="comment">refers to any such program or work, and a "work based on the Program"</font>
00067 <font class="comment">means either the Program or any derivative work under copyright law:</font>
00068 <font class="comment">that is to say, a work containing the Program or a portion of it,</font>
00069 <font class="comment">either verbatim or with modifications and/or translated into another</font>
00070 <font class="comment">language.  (Hereinafter, translation is included without limitation in</font>
00071 <font class="comment">the term "modification".)  Each licensee is addressed as "you".</font>
00072 <font class="comment"></font>
00073 <font class="comment">Activities other than copying, distribution and modification are not</font>
00074 <font class="comment">covered by this License; they are outside its scope.  The act of</font>
00075 <font class="comment">running the Program is not restricted, and the output from the Program</font>
00076 <font class="comment">is covered only if its contents constitute a work based on the</font>
00077 <font class="comment">Program (independent of having been made by running the Program).</font>
00078 <font class="comment">Whether that is true depends on what the Program does.</font>
00079 <font class="comment"></font>
00080 <font class="comment">  1. You may copy and distribute verbatim copies of the Program's</font>
00081 <font class="comment">source code as you receive it, in any medium, provided that you</font>
00082 <font class="comment">conspicuously and appropriately publish on each copy an appropriate</font>
00083 <font class="comment">copyright notice and disclaimer of warranty; keep intact all the</font>
00084 <font class="comment">notices that refer to this License and to the absence of any warranty;</font>
00085 <font class="comment">and give any other recipients of the Program a copy of this License</font>
00086 <font class="comment">along with the Program.</font>
00087 <font class="comment"></font>
00088 <font class="comment">You may charge a fee for the physical act of transferring a copy, and</font>
00089 <font class="comment">you may at your option offer warranty protection in exchange for a fee.</font>
00090 <font class="comment"></font>
00091 <font class="comment">  2. You may modify your copy or copies of the Program or any portion</font>
00092 <font class="comment">of it, thus forming a work based on the Program, and copy and</font>
00093 <font class="comment">distribute such modifications or work under the terms of Section 1</font>
00094 <font class="comment">above, provided that you also meet all of these conditions:</font>
00095 <font class="comment"></font>
00096 <font class="comment">    a) You must cause the modified files to carry prominent notices</font>
00097 <font class="comment">    stating that you changed the files and the date of any change.</font>
00098 <font class="comment"></font>
00099 <font class="comment">    b) You must cause any work that you distribute or publish, that in</font>
00100 <font class="comment">    whole or in part contains or is derived from the Program or any</font>
00101 <font class="comment">    part thereof, to be licensed as a whole at no charge to all third</font>
00102 <font class="comment">    parties under the terms of this License.</font>
00103 <font class="comment"></font>
00104 <font class="comment">    c) If the modified program normally reads commands interactively</font>
00105 <font class="comment">    when run, you must cause it, when started running for such</font>
00106 <font class="comment">    interactive use in the most ordinary way, to print or display an</font>
00107 <font class="comment">    announcement including an appropriate copyright notice and a</font>
00108 <font class="comment">    notice that there is no warranty (or else, saying that you provide</font>
00109 <font class="comment">    a warranty) and that users may redistribute the program under</font>
00110 <font class="comment">    these conditions, and telling the user how to view a copy of this</font>
00111 <font class="comment">    License.  (Exception: if the Program itself is interactive but</font>
00112 <font class="comment">    does not normally print such an announcement, your work based on</font>
00113 <font class="comment">    the Program is not required to print an announcement.)</font>
00114 <font class="comment"></font>
00115 <font class="comment">These requirements apply to the modified work as a whole.  If</font>
00116 <font class="comment">identifiable sections of that work are not derived from the Program,</font>
00117 <font class="comment">and can be reasonably considered independent and separate works in</font>
00118 <font class="comment">themselves, then this License, and its terms, do not apply to those</font>
00119 <font class="comment">sections when you distribute them as separate works.  But when you</font>
00120 <font class="comment">distribute the same sections as part of a whole which is a work based</font>
00121 <font class="comment">on the Program, the distribution of the whole must be on the terms of</font>
00122 <font class="comment">this License, whose permissions for other licensees extend to the</font>
00123 <font class="comment">entire whole, and thus to each and every part regardless of who wrote it.</font>
00124 <font class="comment"></font>
00125 <font class="comment">Thus, it is not the intent of this section to claim rights or contest</font>
00126 <font class="comment">your rights to work written entirely by you; rather, the intent is to</font>
00127 <font class="comment">exercise the right to control the distribution of derivative or</font>
00128 <font class="comment">collective works based on the Program.</font>
00129 <font class="comment"></font>
00130 <font class="comment">In addition, mere aggregation of another work not based on the Program</font>
00131 <font class="comment">with the Program (or with a work based on the Program) on a volume of</font>
00132 <font class="comment">a storage or distribution medium does not bring the other work under</font>
00133 <font class="comment">the scope of this License.</font>
00134 <font class="comment"></font>
00135 <font class="comment">  3. You may copy and distribute the Program (or a work based on it,</font>
00136 <font class="comment">under Section 2) in object code or executable form under the terms of</font>
00137 <font class="comment">Sections 1 and 2 above provided that you also do one of the following:</font>
00138 <font class="comment"></font>
00139 <font class="comment">    a) Accompany it with the complete corresponding machine-readable</font>
00140 <font class="comment">    source code, which must be distributed under the terms of Sections</font>
00141 <font class="comment">    1 and 2 above on a medium customarily used for software interchange; or,</font>
00142 <font class="comment"></font>
00143 <font class="comment">    b) Accompany it with a written offer, valid for at least three</font>
00144 <font class="comment">    years, to give any third party, for a charge no more than your</font>
00145 <font class="comment">    cost of physically performing source distribution, a complete</font>
00146 <font class="comment">    machine-readable copy of the corresponding source code, to be</font>
00147 <font class="comment">    distributed under the terms of Sections 1 and 2 above on a medium</font>
00148 <font class="comment">    customarily used for software interchange; or,</font>
00149 <font class="comment"></font>
00150 <font class="comment">    c) Accompany it with the information you received as to the offer</font>
00151 <font class="comment">    to distribute corresponding source code.  (This alternative is</font>
00152 <font class="comment">    allowed only for noncommercial distribution and only if you</font>
00153 <font class="comment">    received the program in object code or executable form with such</font>
00154 <font class="comment">    an offer, in accord with Subsection b above.)</font>
00155 <font class="comment"></font>
00156 <font class="comment">The source code for a work means the preferred form of the work for</font>
00157 <font class="comment">making modifications to it.  For an executable work, complete source</font>
00158 <font class="comment">code means all the source code for all modules it contains, plus any</font>
00159 <font class="comment">associated interface definition files, plus the scripts used to</font>
00160 <font class="comment">control compilation and installation of the executable.  However, as a</font>
00161 <font class="comment">special exception, the source code distributed need not include</font>
00162 <font class="comment">anything that is normally distributed (in either source or binary</font>
00163 <font class="comment">form) with the major components (compiler, kernel, and so on) of the</font>
00164 <font class="comment">operating system on which the executable runs, unless that component</font>
00165 <font class="comment">itself accompanies the executable.</font>
00166 <font class="comment"></font>
00167 <font class="comment">If distribution of executable or object code is made by offering</font>
00168 <font class="comment">access to copy from a designated place, then offering equivalent</font>
00169 <font class="comment">access to copy the source code from the same place counts as</font>
00170 <font class="comment">distribution of the source code, even though third parties are not</font>
00171 <font class="comment">compelled to copy the source along with the object code.</font>
00172 <font class="comment"></font>
00173 <font class="comment">  4. You may not copy, modify, sublicense, or distribute the Program</font>
00174 <font class="comment">except as expressly provided under this License.  Any attempt</font>
00175 <font class="comment">otherwise to copy, modify, sublicense or distribute the Program is</font>
00176 <font class="comment">void, and will automatically terminate your rights under this License.</font>
00177 <font class="comment">However, parties who have received copies, or rights, from you under</font>
00178 <font class="comment">this License will not have their licenses terminated so long as such</font>
00179 <font class="comment">parties remain in full compliance.</font>
00180 <font class="comment"></font>
00181 <font class="comment">  5. You are not required to accept this License, since you have not</font>
00182 <font class="comment">signed it.  However, nothing else grants you permission to modify or</font>
00183 <font class="comment">distribute the Program or its derivative works.  These actions are</font>
00184 <font class="comment">prohibited by law if you do not accept this License.  Therefore, by</font>
00185 <font class="comment">modifying or distributing the Program (or any work based on the</font>
00186 <font class="comment">Program), you indicate your acceptance of this License to do so, and</font>
00187 <font class="comment">all its terms and conditions for copying, distributing or modifying</font>
00188 <font class="comment">the Program or works based on it.</font>
00189 <font class="comment"></font>
00190 <font class="comment">  6. Each time you redistribute the Program (or any work based on the</font>
00191 <font class="comment">Program), the recipient automatically receives a license from the</font>
00192 <font class="comment">original licensor to copy, distribute or modify the Program subject to</font>
00193 <font class="comment">these terms and conditions.  You may not impose any further</font>
00194 <font class="comment">restrictions on the recipients' exercise of the rights granted herein.</font>
00195 <font class="comment">You are not responsible for enforcing compliance by third parties to</font>
00196 <font class="comment">this License.</font>
00197 <font class="comment"></font>
00198 <font class="comment">  7. If, as a consequence of a court judgment or allegation of patent</font>
00199 <font class="comment">infringement or for any other reason (not limited to patent issues),</font>
00200 <font class="comment">conditions are imposed on you (whether by court order, agreement or</font>
00201 <font class="comment">otherwise) that contradict the conditions of this License, they do not</font>
00202 <font class="comment">excuse you from the conditions of this License.  If you cannot</font>
00203 <font class="comment">distribute so as to satisfy simultaneously your obligations under this</font>
00204 <font class="comment">License and any other pertinent obligations, then as a consequence you</font>
00205 <font class="comment">may not distribute the Program at all.  For example, if a patent</font>
00206 <font class="comment">license would not permit royalty-free redistribution of the Program by</font>
00207 <font class="comment">all those who receive copies directly or indirectly through you, then</font>
00208 <font class="comment">the only way you could satisfy both it and this License would be to</font>
00209 <font class="comment">refrain entirely from distribution of the Program.</font>
00210 <font class="comment"></font>
00211 <font class="comment">If any portion of this section is held invalid or unenforceable under</font>
00212 <font class="comment">any particular circumstance, the balance of the section is intended to</font>
00213 <font class="comment">apply and the section as a whole is intended to apply in other</font>
00214 <font class="comment">circumstances.</font>
00215 <font class="comment"></font>
00216 <font class="comment">It is not the purpose of this section to induce you to infringe any</font>
00217 <font class="comment">patents or other property right claims or to contest validity of any</font>
00218 <font class="comment">such claims; this section has the sole purpose of protecting the</font>
00219 <font class="comment">integrity of the free software distribution system, which is</font>
00220 <font class="comment">implemented by public license practices.  Many people have made</font>
00221 <font class="comment">generous contributions to the wide range of software distributed</font>
00222 <font class="comment">through that system in reliance on consistent application of that</font>
00223 <font class="comment">system; it is up to the author/donor to decide if he or she is willing</font>
00224 <font class="comment">to distribute software through any other system and a licensee cannot</font>
00225 <font class="comment">impose that choice.</font>
00226 <font class="comment"></font>
00227 <font class="comment">This section is intended to make thoroughly clear what is believed to</font>
00228 <font class="comment">be a consequence of the rest of this License.</font>
00229 <font class="comment"></font>
00230 <font class="comment">  8. If the distribution and/or use of the Program is restricted in</font>
00231 <font class="comment">certain countries either by patents or by copyrighted interfaces, the</font>
00232 <font class="comment">original copyright holder who places the Program under this License</font>
00233 <font class="comment">may add an explicit geographical distribution limitation excluding</font>
00234 <font class="comment">those countries, so that distribution is permitted only in or among</font>
00235 <font class="comment">countries not thus excluded.  In such case, this License incorporates</font>
00236 <font class="comment">the limitation as if written in the body of this License.</font>
00237 <font class="comment"></font>
00238 <font class="comment">  9. The Free Software Foundation may publish revised and/or new versions of the General Public License from time to time.  Such new versions will be similar in spirit to the present version, but may differ in detail to address new problems or concerns.</font>
00239 <font class="comment"></font>
00240 <font class="comment">Each version is given a distinguishing version number.  If the Program</font>
00241 <font class="comment">specifies a version number of this License which applies to it and "any</font>
00242 <font class="comment">later version", you have the option of following the terms and conditions </font>
00243 <font class="comment">either of that version or of any later version published by the Free Software </font>
00244 <font class="comment">Foundation.  If the Program does not specify a version number of this License,</font>
00245 <font class="comment"> you may choose any version ever published by the Free Software Foundation.</font>
00246 <font class="comment"></font>
00247 <font class="comment">  10. If you wish to incorporate parts of the Program into other free</font>
00248 <font class="comment">programs whose distribution conditions are different, write to the author to </font>
00249 <font class="comment">ask for permission.  For software which is copyrighted by the Free Software </font>
00250 <font class="comment">Foundation, write to the Free Software Foundation; we sometimes make </font>
00251 <font class="comment">exceptions for this.  Our decision will be guided by the two goals of </font>
00252 <font class="comment">preserving the free status of all derivatives of our free software and of </font>
00253 <font class="comment">promoting the sharing and reuse of software generally.</font>
00254 <font class="comment"></font>
00255 <font class="comment">                            NO WARRANTY</font>
00256 <font class="comment"></font>
00257 <font class="comment">  11. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY FOR</font>
00258 <font class="comment">THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN </font>
00259 <font class="comment">OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES PROVIDE </font>
00260 <font class="comment">THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, </font>
00261 <font class="comment">INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND </font>
00262 <font class="comment">FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND </font>
00263 <font class="comment">PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE PROGRAM PROVE DEFECTIVE, </font>
00264 <font class="comment">YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR CORRECTION.</font>
00265 <font class="comment"></font>
00266 <font class="comment">  12. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING </font>
00267 <font class="comment">WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR </font>
00268 <font class="comment">REDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, </font>
00269 <font class="comment">INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING </font>
00270 <font class="comment">OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO </font>
00271 <font class="comment">LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR </font>
00272 <font class="comment">THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS), </font>
00273 <font class="comment">EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH </font>
00274 <font class="comment">DAMAGES.</font>
00275 <font class="comment"></font>
00276 <font class="comment">                     END OF TERMS AND CONDITIONS</font>
00277 <font class="comment">*/</font>
<a name="l00278"></a><a class="code" href="XMDialogs_8cpp.html#a0">00278</a> <font class="keyword">static</font> <font class="keyword">const</font> <font class="keywordtype">char</font>* <a class="code" href="XMDialogs_8cpp.html#a0">Copyright</a>= <font class="stringliteral">"(C) Copyright Michigan State University 2002, All rights reserved"</font>;<font class="comment">/*</font>
00279 <font class="comment">** Facility:</font>
00280 <font class="comment">**   Xamine - C++ Support objects for Motif.</font>
00281 <font class="comment">** Abstract:</font>
00282 <font class="comment">**   XMDialogs.cc  - This file contains support routines for the XM dialog</font>
00283 <font class="comment">**                   objects.  That is code which for one or another reason</font>
00284 <font class="comment">**                   was not deemed appropriate for in-line definition.</font>
00285 <font class="comment">** Author:</font>
00286 <font class="comment">**   Ron Fox</font>
00287 <font class="comment">**   NSCL</font>
00288 <font class="comment">**   Michigan State University</font>
00289 <font class="comment">**   East Lansing, MI 48824-1321</font>
00290 <font class="comment">** Version:</font>
00291 <font class="comment">**   @(#)XMDialogs.cc   8.2 9/10/96 </font>
00292 <font class="comment">*/</font>
00293 <font class="preprocessor">#ifdef unix</font>
00294 <font class="preprocessor"></font><font class="preprocessor">#pragma implementation "XMCallback.h"</font>
00295 <font class="preprocessor"></font><font class="preprocessor">#endif</font>
<a name="l00296"></a><a class="code" href="XMDialogs_8cpp.html#a1">00296</a> <font class="preprocessor"></font><font class="keyword">static</font> <font class="keywordtype">char</font> *<a class="code" href="XMDialogs_8cpp.html#a1">sccsinfo</a> = <font class="stringliteral">"@(#)XMDialogs.cc       8.2 9/10/96 \n"</font>;
00297 <font class="comment">/*</font>
00298 <font class="comment">** Include files:</font>
00299 <font class="comment">*/</font>
00300 
00301 
00302 
00303 <font class="preprocessor">#include "<a class="code" href="XMDialogs_8h.html">XMDialogs.h</a>"</font>
00304 <font class="preprocessor">#include &lt;Xm/MwmUtil.h&gt;</font>
00305 <font class="preprocessor">#include &lt;Xm/DialogS.h&gt;</font>
00306 <font class="preprocessor">#include &lt;Xm/FileSB.h&gt;</font>
00307 <font class="preprocessor">#include &lt;X11/Shell.h&gt;</font>
00308 <font class="preprocessor">#include &lt;stdio.h&gt;</font>
00309 <font class="preprocessor">#include &lt;assert.h&gt;</font>
00310 <font class="preprocessor">#include &lt;string.h&gt;</font>
00311 <font class="preprocessor">#include &lt;ctype.h&gt;</font>
00312 
00313 <font class="comment">/*</font>
00314 <font class="comment">** Functional Description:</font>
00315 <font class="comment">**   StripNonPrinting:</font>
00316 <font class="comment">**     Creates an output string which consists of the input string with all</font>
00317 <font class="comment">**     non printing characters stripped.</font>
00318 <font class="comment">** Formal Parameters:</font>
00319 <font class="comment">**     char* out:</font>
00320 <font class="comment">**        output string.</font>
00321 <font class="comment">**     char* in:</font>
00322 <font class="comment">**        input string.</font>
00323 <font class="comment">*/</font>
<a name="l00324"></a><a class="code" href="XMDialogs_8cpp.html#a6">00324</a> <font class="keyword">static</font> <font class="keywordtype">void</font> <a class="code" href="XMDialogs_8cpp.html#a6">StripNonPrinting</a>(<font class="keywordtype">char</font>* out, <font class="keywordtype">char</font>* in)
00325 {
00326   <font class="keywordtype">int</font> len = strlen(in);
00327   <font class="keywordflow">for</font>(<font class="keywordtype">int</font> i = 0; i &lt; len; i++) {
00328     <font class="keywordflow">if</font>(isprint(*in)) *out++ = *in;
00329     in++;
00330   }
00331   *out = <font class="charliteral">'\0'</font>;
00332 }
00333 
00334 <font class="comment">/*</font>
00335 <font class="comment">** Functional Descriptions:</font>
00336 <font class="comment">**   SetupBorders:</font>
00337 <font class="comment">**     Sets up dialog box borders in motif to remove the menu.</font>
00338 <font class="comment">** Formal Parameters:</font>
00339 <font class="comment">**   Widget id:</font>
00340 <font class="comment">**     Some widget in the dialog hierachy.</font>
00341 <font class="comment">*/</font>
<a name="l00342"></a><a class="code" href="XMDialogs_8cpp.html#a7">00342</a> <font class="keyword">static</font> <font class="keywordtype">void</font> <a class="code" href="XMDialogs_8cpp.html#a7">SetupBorders</a>(Widget id)
00343 {
00344   <font class="comment">/* Locate the vendor shell where all this stuff is */</font>
00345 
00346   <font class="keywordflow">while</font>(!XtIsVendorShell(id)) 
00347     id = XtParent(id);
00348 
00349   <font class="comment">/* Turn off the menu but keep everything else the same: */</font>
00350 
00351   <font class="keywordflow">if</font>(XmIsMotifWMRunning(id)) {  <font class="comment">/* Only applies to motif wm.  */</font>
00352     <font class="keywordtype">int</font> decorations;
00353 
00354     XtVaGetValues(id, XmNmwmDecorations, &amp;decorations, NULL);
00355     decorations = decorations &amp; (MWM_DECOR_BORDER | MWM_DECOR_RESIZEH |
00356                                  MWM_DECOR_TITLE  | MWM_DECOR_MAXIMIZE |
00357                                  MWM_DECOR_MINIMIZE);
00358     XtVaSetValues(id, XmNmwmDecorations, decorations, NULL);
00359   }
00360 }
00361 
00362 <font class="comment">/*</font>
00363 <font class="comment">** Method Description:</font>
00364 <font class="comment">**   SetSelectionList   - This function sets the selection list for a </font>
00365 <font class="comment">**                        SelectionDialog object. </font>
00366 <font class="comment">**                        In the special case that list_count == 0,  </font>
00367 <font class="comment">**                        We set the selection list pointer to NULL and</font>
00368 <font class="comment">**                        zero the count.</font>
00369 <font class="comment">** Formal Parameters:</font>
00370 <font class="comment">**   Cardinal list_count:</font>
00371 <font class="comment">**      The number of list items.</font>
00372 <font class="comment">**   char **selections:</font>
00373 <font class="comment">**      The set of selections to enter in the box.</font>
00374 <font class="comment">*/</font>
00375 <font class="keywordtype">void</font> XMSelectionDialog::SetSelectionList(Cardinal list_count, 
00376                                          <font class="keywordtype">char</font> **selections)
00377 {
00378   XmString *list;               <font class="comment">/* The LtoR'd strings. */</font>
00379   XmString *l;
00380   <font class="keywordtype">char</font>     **s;
00381 
00382   <font class="comment">/* Handle special list_count == 0 case */</font>
00383   <font class="comment">/* Transform the chars to compound strings: */</font>
00384   
00385   <font class="keywordflow">if</font>(list_count == 0) {
00386     list = NULL;
00387   }
00388   <font class="keywordflow">else</font> {
00389 
00390     l = list = (XmString *)XtMalloc(list_count*<font class="keyword">sizeof</font>(XmString));
00391     s = selections;
00392     <font class="keywordflow">for</font>(<font class="keywordtype">int</font> i = 0; i &lt; list_count; i++) {
00393       <font class="keywordtype">char</font>* stripped = <font class="keyword">new</font> <font class="keywordtype">char</font>[strlen(*s) + 1];
00394       <a class="code" href="XMDialogs_8cpp.html#a6">StripNonPrinting</a>(stripped, *s);
00395       *l++ = XmStringCreateSimple(stripped);
00396       s++;
00397       <font class="keyword">delete</font> []stripped;
00398     }
00399   }
00400   <font class="comment">/* Set the resources: */</font>
00401 
00402   XtVaSetValues(id, XmNlistItems,     list,
00403                     XmNlistItemCount, list_count,
00404                 NULL);
00405     
00406   <font class="keywordflow">if</font>(list_count) {
00407     l = list;
00408     <font class="keywordflow">for</font>(<font class="keywordtype">int</font> i = 0; i &lt; list_count; i++)
00409       XmStringFree(*l++);
00410     XtFree((<font class="keywordtype">char</font> *)list);
00411   }
00412 }
00413 
00414 <font class="comment">/*</font>
00415 <font class="comment">** Method Description:</font>
00416 <font class="comment">**    FileListDialog::GetDirectory - Get the current search directory for</font>
00417 <font class="comment">**                                   a file selectionbox.</font>
00418 <font class="comment">** Returns:</font>
00419 <font class="comment">**   Pointer to an XtAlloc'd string which must be freed by the caller.  The</font>
00420 <font class="comment">**   string contains the ASCIZ directory path string.</font>
00421 <font class="comment">*/</font>
00422 
00423 <font class="keywordtype">char</font> *XMFileListDialog::GetDirectory() {
00424   XmString dir_compound;
00425   <font class="keywordtype">char</font>     *directory;
00426 
00427   GetAttribute(XmNdirectory, &amp;dir_compound);
00428 
00429   XmStringGetLtoR(dir_compound, XmSTRING_DEFAULT_CHARSET, &amp;directory);
00430   XmStringFree(dir_compound);
00431   <font class="keywordflow">return</font> directory;
00432 }
00433 
00434 <font class="comment">/*</font>
00435 <font class="comment">** Method Description:</font>
00436 <font class="comment">**    FileListDialog::GetFileMask - Get the file search mask.</font>
00437 <font class="comment">** Returns:</font>
00438 <font class="comment">**  pointer to an XtMalloc'd ASCIZ string which must be released by the caller</font>
00439 <font class="comment">*/</font>
00440 <font class="keywordtype">char</font> *XMFileListDialog::GetFileMask()
00441 {
00442   XmString mask_compound;
00443   <font class="keywordtype">char</font>    *mask;
00444 
00445   GetAttribute(XmNdirMask, &amp;mask_compound);
00446   XmStringGetLtoR(mask_compound, XmSTRING_DEFAULT_CHARSET, &amp;mask);
00447   XmStringFree(mask_compound);
00448   <font class="keywordflow">return</font> mask;
00449 }
00450 
00451 <font class="comment">/*</font>
00452 <font class="comment">** Method Description:</font>
00453 <font class="comment">**    FileListDialog::GetFullSearchString() - Returns the full directory/search</font>
00454 <font class="comment">**                                            mask string.</font>
00455 <font class="comment">** Returns:</font>
00456 <font class="comment">**   char * pointer to a null terminated string containing the mask.</font>
00457 <font class="comment">**   The string was XtMalloc'd and must therefore be XtFree'd by the caller</font>
00458 <font class="comment">**   after use.</font>
00459 <font class="comment">**/</font>
00460 <font class="keywordtype">char</font> *XMFileListDialog::GetFullSearchString()
00461 {
00462   XmString search_compound;
00463   <font class="keywordtype">char</font>     *mask;
00464 
00465   GetAttribute(XmNdirSpec, &amp;search_compound);
00466   XmStringGetLtoR(search_compound, XmSTRING_DEFAULT_CHARSET, &amp;mask);
00467   XmStringFree(search_compound);
00468   <font class="keywordflow">return</font> mask;
00469 }
00470 
00471 <font class="comment">/*</font>
00472 <font class="comment">** Method Description:</font>
00473 <font class="comment">**   XMCustomDialog::CreateDialog:</font>
00474 <font class="comment">**     This method create a skeleton custom dialog.  Since this class</font>
00475 <font class="comment">**     is a superclass for all user defined custom dialogs, nothing is</font>
00476 <font class="comment">**     actually managed or popped up until Manage() is called.</font>
00477 <font class="comment">** Formal Parameters:</font>
00478 <font class="comment">**   char *name:</font>
00479 <font class="comment">**     Name of the dialog... will be applied to the dialog shell.</font>
00480 <font class="comment">**   Widget parent:</font>
00481 <font class="comment">**     The dialog's parent.</font>
00482 <font class="comment">**   char *title:</font>
00483 <font class="comment">**     Contains the title that will be displayed on the banner of the dialog</font>
00484 <font class="comment">**     shell.</font>
00485 <font class="comment">**   ArgList l:</font>
00486 <font class="comment">**     List of resource argument which will be applied to the shell.</font>
00487 <font class="comment">**   Cardinal num_args:</font>
00488 <font class="comment">**     Count of resource argumnts which will be applied to the shell.</font>
00489 <font class="comment">*/</font>
00490 <font class="keywordtype">void</font> XMCustomDialog::CreateDialog(<font class="keywordtype">char</font> *name, Widget parent, <font class="keywordtype">char</font> *title,
00491                                   ArgList l, Cardinal num_args)
00492 {
00493 
00494   <font class="comment">/* Create the shell */</font>
00495 
00496   id = XtVaCreatePopupShell(name, xmDialogShellWidgetClass, parent,
00497                             XmNtitle, title,
00498                             XmNdeleteResponse, XmDESTROY,
00499                             NULL);
00500 
00501   Widget shell = id;
00502   <font class="comment">/*</font>
00503 <font class="comment">  **  For motif custom dialogs we'll turn off the controls on the title bar.</font>
00504 <font class="comment">  **  This will prevent closes from accidently destroying our widget </font>
00505 <font class="comment">  **  Heirarchy. </font>
00506 <font class="comment">  */</font>
00507   <a class="code" href="XMDialogs_8cpp.html#a7">SetupBorders</a>(id);
00508 
00509   <font class="keywordflow">if</font>( (num_args &gt; 0) &amp;&amp; (l != NULL)) XtSetValues(id, l, num_args);
00510 
00511   <font class="comment">/*  Create a form which is used to allow the modalization to be controlled */</font>
00512 
00513   shell_child = <font class="keyword">new</font> <a class="code" href="classXMForm.html">XMForm</a>(<font class="stringliteral">"Dialog_Form"</font>, id);
00514 
00515   <font class="comment">/* Create the pane manager widget which manages the dialog elements */</font>
00516 
00517 
00518   Arg pane_args[2];
00519   XtSetArg(pane_args[0], XmNsashWidth, 1);
00520   XtSetArg(pane_args[1], XmNsashHeight,1);
00521 
00522   top_manager= <font class="keyword">new</font> <a class="code" href="classXMPanedWindow.html">XMPanedWindow</a>(<font class="stringliteral">"Dialog_toplevel"</font>,
00523                                  *shell_child, pane_args, 2);
00524   <font class="comment">/* Glue the pane to all corners of the form:  */</font>
00525 
00526   shell_child-&gt;SetTopAttachment(*top_manager, XmATTACH_FORM);
00527   shell_child-&gt;SetLeftAttachment(*top_manager, XmATTACH_FORM);
00528   shell_child-&gt;SetRightAttachment(*top_manager, XmATTACH_FORM);
00529   shell_child-&gt;SetBottomAttachment(*top_manager, XmATTACH_FORM);
00530 
00531   <font class="comment">/* Create the sub region managers: */</font>
00532 
00533   work_area  = <font class="keyword">new</font> <a class="code" href="classXMForm.html">XMForm</a>(<font class="stringliteral">"Dialog_work_area"</font>,
00534                           *top_manager);
00535   action_area= <font class="keyword">new</font> <a class="code" href="classXMRowColumn.html">XMRowColumn</a>(<font class="stringliteral">"Dialog_action_area"</font>,
00536                                *top_manager);
00537 
00538 
00539   <font class="comment">/* Put the buttons in the action area widget */</font>
00540  
00541   action_area-&gt;SetOrientation(XmHORIZONTAL);
00542   action_area-&gt;SetPacking(XmPACK_COLUMN);
00543 
00544   Ok    = <font class="keyword">new</font> <a class="code" href="classXMPushButton.html">XMPushButton</a>(<font class="stringliteral">"Ok"</font>, *action_area);
00545   Apply = <font class="keyword">new</font> <a class="code" href="classXMPushButton.html">XMPushButton</a>(<font class="stringliteral">"Apply"</font>, *action_area);
00546   Cancel= <font class="keyword">new</font> <a class="code" href="classXMPushButton.html">XMPushButton</a>(<font class="stringliteral">"Cancel"</font>, *action_area);
00547   Help  = <font class="keyword">new</font> <a class="code" href="classXMPushButton.html">XMPushButton</a>(<font class="stringliteral">"Help"</font>, *action_area);
00548 
00549 
00550 }
00551 
00552 
00553 <font class="comment">/*</font>
00554 <font class="comment">** Method Description:</font>
00555 <font class="comment">**    XMCustomDialog::Manage:</font>
00556 <font class="comment">**      This function manages the dialog. This involves managing the</font>
00557 <font class="comment">**      action_area, setting it's minimum/maximum pane size to actual</font>
00558 <font class="comment">**      pane size, and then managing the form, the pane and popping up the</font>
00559 <font class="comment">**      shell.</font>
00560 <font class="comment">*/</font>
00561 <font class="keywordtype">void</font> XMCustomDialog::Manage()
00562 {
00563   XtWidgetGeometry size;
00564 
00565   <font class="comment">/* Manage the action area and set up the pane height, turning off sashes */</font>
00566 
00567   action_area-&gt;Manage();
00568 
00569 
00570   
00571   shell_child-&gt;SetTopAttachment(*top_manager, XmATTACH_FORM);
00572   shell_child-&gt;SetLeftAttachment(*top_manager, XmATTACH_FORM);
00573   shell_child-&gt;SetRightAttachment(*top_manager, XmATTACH_FORM);
00574   shell_child-&gt;SetBottomAttachment(*top_manager, XmATTACH_FORM);
00575 
00576   XtQueryGeometry(action_area-&gt;getid(), NULL, &amp;size);
00577   top_manager-&gt;MaxPaneSize(*action_area, size.height);
00578   top_manager-&gt;MinPaneSize(*action_area, size.height);
00579 
00580   <font class="comment">/*  Manage the work area, and the paned window: */</font>
00581 
00582   work_area-&gt;Manage();
00583   top_manager-&gt;Manage();
00584   shell_child-&gt;Manage();
00585 
00586   <font class="comment">/* Pop up the shell: */</font>
00587 
00588   XtPopup(id, XtGrabNone);
00589   
00590 }
00591 
00592 <font class="comment">/*</font>
00593 <font class="comment">** Method Description:</font>
00594 <font class="comment">**    XMCustomDialog::UnManage:</font>
00595 <font class="comment">**       This method unmanages a custom dialog.</font>
00596 <font class="comment">**       It does this by unmanaging the manager widgets and</font>
00597 <font class="comment">**       popping down the shell</font>
00598 <font class="comment">*/</font>
00599 <font class="keywordtype">void</font> XMCustomDialog::UnManage()
00600 {
00601   shell_child-&gt;UnManage();
00602   XtPopdown(id);
00603 }
00604 
00605 <font class="comment">/*</font>
00606 <font class="comment">** This page contains help texts which are defaults for the self contained</font>
00607 <font class="comment">** dialog objects.</font>
00608 <font class="comment">*/</font>
00609 
<a name="l00610"></a><a class="code" href="XMDialogs_8cpp.html#a2">00610</a> <font class="keyword">static</font> <font class="keywordtype">char</font> *<a class="code" href="XMDialogs_8cpp.html#a2">prompter_help</a>[] = {
00611   <font class="stringliteral">"You are being prompted for some text.  Type the text in the text window.\n"</font>,
00612   <font class="stringliteral">" When you have edited the text to look like what you want click:  \n\n"</font>,
00613   <font class="stringliteral">"   Ok    - To accept the text and remove the dialog.\n"</font>,
00614   <font class="stringliteral">"   Apply - To accept the text and leave the dialog displayed \n"</font>,
00615   <font class="stringliteral">"   Cancel- To cancel dismiss the dialog without accepting the text\n"</font>,
00616   <font class="stringliteral">"   Help  - To display this message\n"</font>,
00617   NULL
00618 };
00619 
00620 <font class="comment">/*</font>
00621 <font class="comment">** Functional Description:</font>
00622 <font class="comment">**   XMPrompter::XMPrompter:</font>
00623 <font class="comment">**        This method constructs a new prompter object.  The object is </font>
00624 <font class="comment">**        selfcontained in the sense that callbacks are mapped to method</font>
00625 <font class="comment">**        functions.  There are two instantiators that work essentially</font>
00626 <font class="comment">**        the same way.   The only difference is whether or not the parent</font>
00627 <font class="comment">**        widget is an objectified widget or an Xt Widget handle.</font>
00628 <font class="comment">** Formal Parameters:</font>
00629 <font class="comment">**     char *name:</font>
00630 <font class="comment">**        Name of the widget.</font>
00631 <font class="comment">**     XMWidget &amp;parent</font>
00632 <font class="comment">** or  Widget    parent:</font>
00633 <font class="comment">**        Identifies the parent widget for this object.</font>
00634 <font class="comment">**     char *prompt:</font>
00635 <font class="comment">**        Points to the string which specifies the prompt, if non NULL.</font>
00636 <font class="comment">**     XtPointer calldata:</font>
00637 <font class="comment">**        Optional User data which will be passed to callback routines.</font>
00638 <font class="comment">*/</font>
00639 XMPrompter::XMPrompter(<font class="keywordtype">char</font> *name, Widget parent, <font class="keywordtype">char</font> *prompt, 
00640                        XtPointer calldata) :
00641                        XMPromptDialog(name, parent, prompt),
00642                        ok(this),
00643                        apply(this),
00644                        cancel(this),
00645                        help(this)
00646 {
00647   <font class="comment">/* Register the callbacks: */</font>
00648 
00649   ok.Register(<font class="keyword">this</font>, XmNokCallback,&amp;XMPrompter::OkCallback, calldata);
00650   apply.Register(<font class="keyword">this</font>, XmNapplyCallback, &amp;XMPrompter::ApplyCallback, calldata);
00651   cancel.Register(<font class="keyword">this</font>, XmNcancelCallback, 
00652                   &amp;XMPrompter::CancelCallback, calldata);
00653   help.Register(helpbutton, XmNactivateCallback, &amp;XMPrompter::HelpCallback, 
00654                 calldata);
00655 
00656   <font class="comment">/* Register the default help text: */</font>
00657 
00658 
00659   help_info.name = <font class="stringliteral">"Prompt_Help"</font>;
00660   help_info.dialog    = NULL;
00661   help_info.text      = <a class="code" href="XMDialogs_8cpp.html#a2">prompter_help</a>;
00662 }
00663 XMPrompter::XMPrompter(<font class="keywordtype">char</font> *name, <a class="code" href="classXMWidget.html">XMWidget</a> &amp;parent, <font class="keywordtype">char</font> *prompt,
00664                        XtPointer calldata) :
00665                        XMPromptDialog(name, parent, prompt),
00666                        ok(this),
00667                        apply(this),
00668                        cancel(this),
00669                        help(this)
00670 {
00671   <font class="comment">/* Register the callbacks: */</font>
00672 
00673   ok.Register(<font class="keyword">this</font>, XmNokCallback, &amp;XMPrompter::OkCallback, calldata);
00674   apply.Register(<font class="keyword">this</font>, XmNapplyCallback, &amp;XMPrompter::ApplyCallback, calldata);
00675   cancel.Register(<font class="keyword">this</font>, XmNcancelCallback, &amp;XMPrompter::CancelCallback, calldata);
00676   help.Register(helpbutton, XmNactivateCallback, &amp;XMPrompter::HelpCallback, calldata);
00677 
00678   <font class="comment">/* Register the default help text: */</font>
00679 
00680 
00681   help_info.name = <font class="stringliteral">"Prompt_Help"</font>;
00682   help_info.dialog    = NULL;
00683   help_info.text      = <a class="code" href="XMDialogs_8cpp.html#a2">prompter_help</a>;
00684 
00685   <font class="comment">/* If we have help we should enable the help button: */</font>
00686 
00687   helpbutton-&gt;Enable();
00688 }
00689 
00690 <font class="comment">/*</font>
00691 <font class="comment">** Functional Description:</font>
00692 <font class="comment">**   XMPrompter::~XMPrompter:</font>
00693 <font class="comment">**      This method is used to destroy a prompter.  All of the callbacks</font>
00694 <font class="comment">**      must be unregistersed, and the help widget, if it exists must</font>
00695 <font class="comment">**      also be deleted.</font>
00696 <font class="comment">*/</font>
00697 XMPrompter::~XMPrompter()
00698 {
00699   ok.UnRegister();
00700   apply.UnRegister();
00701   cancel.UnRegister();
00702   help.UnRegister();
00703 
00704   <font class="keywordflow">if</font>(help_info.dialog) <font class="keyword">delete</font> help_info.dialog;
00705 
00706 }
00707 
00708 <font class="comment">/*</font>
00709 <font class="comment">** Functional Description:</font>
00710 <font class="comment">**   XMPrompter::SetHelpText:</font>
00711 <font class="comment">**     This function allows the user to set a dialog specific help text</font>
00712 <font class="comment">**     in for the prompter object.</font>
00713 <font class="comment">** Formal Parameters:</font>
00714 <font class="comment">**   char **newhelp</font>
00715 <font class="comment">**    List of null terminated text strings to display in the dialog.</font>
00716 <font class="comment">**    The last string pointer should be NULL.</font>
00717 <font class="comment">*/</font>
00718 <font class="keywordtype">void</font> XMPrompter::SetHelpText(<font class="keywordtype">char</font> **new_help)
00719 {
00720   help_info.text = new_help;
00721 }
00722 <font class="comment">/*</font>
00723 <font class="comment">** Functional Description:</font>
00724 <font class="comment">**    XMPrompter::RevertHelpText:</font>
00725 <font class="comment">**      Revert to standard 'generic' help text.</font>
00726 <font class="comment">*/</font>
00727 <font class="keywordtype">void</font> XMPrompter::RevertHelpText()
00728 {
00729   help_info.text = <a class="code" href="XMDialogs_8cpp.html#a2">prompter_help</a>;
00730 }
00731 
00732 <font class="comment">/*</font>
00733 <font class="comment">** Functional Description:</font>
00734 <font class="comment">**   XMPrompter::Perform:</font>
00735 <font class="comment">**     This function is meant to be overridden by the person specializing</font>
00736 <font class="comment">**     this dialog.  The override should perform the application specific</font>
00737 <font class="comment">**     task and then return True if the task was properly performed or</font>
00738 <font class="comment">**     False if not.  The boolean is used by the OkCallback to decide if</font>
00739 <font class="comment">**     it's necessary to dismiss the dialog.</font>
00740 <font class="comment">** Formal Parameters:</font>
00741 <font class="comment">**   XMWidget *wid:</font>
00742 <font class="comment">**    This pointer actually.</font>
00743 <font class="comment">**   XtPointer userd:</font>
00744 <font class="comment">**    Application specific callback data.</font>
00745 <font class="comment">**   XtPointer calld:</font>
00746 <font class="comment">**    Actually points to an XmSelectionBoxCallbackStruct which </font>
00747 <font class="comment">**    describes what's happening.</font>
00748 <font class="comment">** Returns:</font>
00749 <font class="comment">**   True    - If action was successfully performed.</font>
00750 <font class="comment">**   False   - If action was not successfully performed.</font>
00751 <font class="comment">*/</font>
00752 Boolean XMPrompter::Perform(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer userd, XtPointer calld)
00753 {
00754   XmSelectionBoxCallbackStruct *info = (XmSelectionBoxCallbackStruct *)calld;
00755 
00756   assert((info-&gt;reason == XmCR_APPLY) || 
00757          (info-&gt;reason == XmCR_OK));  <font class="comment">// This for debugging.</font>
00758 
00759   <font class="keywordflow">return</font> True;                        <font class="comment">// default does nothing but Ok dismisses</font>
00760 }
00761 
00762 <font class="comment">/*</font>
00763 <font class="comment">** Functional Description:</font>
00764 <font class="comment">**    XMPrompter::OkCallback:</font>
00765 <font class="comment">**      This virtual function is called in response to the </font>
00766 <font class="comment">**      Ok Button.  In most cases, the default action should be sufficient,</font>
00767 <font class="comment">**      however, the function is virtual to allow easy replacement without</font>
00768 <font class="comment">**      worry about handling generic dialogs.  The Default action is</font>
00769 <font class="comment">**      to call Perform to get the appropriate stuff done.  If Perform</font>
00770 <font class="comment">**      returns True, then we unmanage ourself.</font>
00771 <font class="comment">**    XMPRompter::ApplyCallback:</font>
00772 <font class="comment">**      Virtual function called in response to the Apply button. </font>
00773 <font class="comment">**      Normallly the default action,  to call Perform, will be sufficient.</font>
00774 <font class="comment">**      The function is declared virtual to allow hassle free overrides.</font>
00775 <font class="comment">** Formal Parameters:</font>
00776 <font class="comment">**   XMWidget *wid:</font>
00777 <font class="comment">**     Pointer to the widget (this)</font>
00778 <font class="comment">**   XtPointer userd:</font>
00779 <font class="comment">**     User data that we're supposed to pass on to perform.</font>
00780 <font class="comment">**   XtPointer calld:</font>
00781 <font class="comment">**     Callback specific data from motif which we pass into Perform.</font>
00782 <font class="comment">**     It's really pointing to an XmSelectionBoxCallbackStruct.</font>
00783 <font class="comment">*/</font>
00784 <font class="keywordtype">void</font> XMPrompter::OkCallback(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer userd, XtPointer calld)
00785 {
00786   <font class="keywordflow">if</font>(Perform(wid, userd, calld))
00787     UnManage();
00788 }
00789 <font class="keywordtype">void</font> XMPrompter::ApplyCallback(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer userd, XtPointer calld)
00790 {
00791   Perform(wid, userd, calld);
00792 }
00793 
00794 <font class="comment">/*</font>
00795 <font class="comment">** Functional description:</font>
00796 <font class="comment">**  XMPrompter::CancelCallback:</font>
00797 <font class="comment">**    This function is called for a cancel hit.  Normally, the default</font>
00798 <font class="comment">**    action, to unmanage the dialog should be sufficient.  However</font>
00799 <font class="comment">**    the function is virtual to allow easy override in case there are</font>
00800 <font class="comment">**    special requirements.</font>
00801 <font class="comment">** Formal Parameters:</font>
00802 <font class="comment">**    As for all callbacks.</font>
00803 <font class="comment">*/</font>
00804 <font class="keywordtype">void</font> XMPrompter::CancelCallback(<a class="code" href="classXMWidget.html">XMWidget</a> *wind, XtPointer userd, 
00805                                 XtPointer calld)
00806 {
00807   UnManage();
00808 }
00809 
00810 <font class="comment">/*</font>
00811 <font class="comment">** Functional Description:</font>
00812 <font class="comment">**   XMPrompter::HelpCallback:</font>
00813 <font class="comment">**     This function is called whenever the help button is struck.</font>
00814 <font class="comment">**     The default is to display a message/help dialog box whith the text</font>
00815 <font class="comment">**     that was specified in the lsat SetHelpText call or the default</font>
00816 <font class="comment">**     help text.</font>
00817 <font class="comment">*/</font>
00818 <font class="keywordtype">void</font> XMPrompter::HelpCallback(<a class="code" href="classXMWidget.html">XMWidget</a> *wind, XtPointer userd, XtPointer calld)
00819 {
00820   <a class="code" href="XMHelp_8cpp.html#a9">XM_display_help</a>( <font class="keyword">this</font>, &amp;help_info, NULL);
00821 }
00822 
00823 <font class="comment">/*</font>
00824 <font class="comment">** Functional Description:</font>
00825 <font class="comment">**   XMQuestioner::XMQuestioner:</font>
00826 <font class="comment">**     This method instantiates a dialog which poses a yes/no question</font>
00827 <font class="comment">**     The XMQuestioner class includes self contained behavior in the</font>
00828 <font class="comment">**     sense that the two buttons (labelled Yes and No by default) are </font>
00829 <font class="comment">**     associated with callback which are methods of the object.</font>
00830 <font class="comment">** Formal Parameters:</font>
00831 <font class="comment">**   char *n:</font>
00832 <font class="comment">**     Name of the question dialog widget.. also shown in the title part of</font>
00833 <font class="comment">**     the widget banner.</font>
00834 <font class="comment">**   XMWidget parent:</font>
00835 <font class="comment">**   Widget   &amp;parent:</font>
00836 <font class="comment">**      Widget which is the parent of this widget.</font>
00837 <font class="comment">**   char *msg:</font>
00838 <font class="comment">**      Contains message text displayed in the dialog.  This should be a </font>
00839 <font class="comment">**      question with a yes or no answer or the buttons should be re-labelled</font>
00840 <font class="comment">**      with the appropriate two answers.</font>
00841 <font class="comment">**   XtPointer cbd:</font>
00842 <font class="comment">**      Callback data which is passed to the Yes and No callback functions.</font>
00843 <font class="comment">**   Arglist list:</font>
00844 <font class="comment">**      Pointer to list of resources to override default widget resources</font>
00845 <font class="comment">**   Cardinal argcount:</font>
00846 <font class="comment">**      Number of resource entries in 'list'</font>
00847 <font class="comment">*/</font>
00848 XMQuestioner::XMQuestioner(<font class="keywordtype">char</font> *n, Widget parent, <font class="keywordtype">char</font> *msg, XtPointer cbd,
00849                            ArgList list, Cardinal argcount) :
00850                            XMQuestionDialog(n, parent, msg, 
00851                                             NULL, cbd, list, 
00852                                             argcount) ,
00853                                             yescallback(this) ,
00854                                             nocallback(this)
00855 {
00856   yescallback.Register(<font class="keyword">this</font>, XmNokCallback, &amp;XMQuestioner::Yescb, cbd);
00857   nocallback.Register(<font class="keyword">this</font>, XmNcancelCallback, &amp;XMQuestioner::Nocb, cbd);
00858   
00859 }
00860 XMQuestioner::XMQuestioner(<font class="keywordtype">char</font> *n, <a class="code" href="classXMWidget.html">XMWidget</a> &amp;parent, <font class="keywordtype">char</font> *msg, XtPointer cbd,
00861                            ArgList list, Cardinal argcount) :
00862                            XMQuestionDialog(n, parent, msg, 
00863                                             NULL, cbd, list, 
00864                                             argcount) ,
00865                            yescallback(this) ,
00866                            nocallback(this)
00867 {
00868   yescallback.Register(<font class="keyword">this</font>, XmNokCallback, &amp;XMQuestioner::Yescb, cbd);
00869   nocallback.Register(<font class="keyword">this</font>, XmNcancelCallback, &amp;XMQuestioner::Nocb, cbd);
00870   
00871 }
00872 
00873 
00874 <font class="comment">/* </font>
00875 <font class="comment">** Functional Description:</font>
00876 <font class="comment">**   XMQuestioner::~XMQuestioner:</font>
00877 <font class="comment">**     Destroys an instance of a questioner class. </font>
00878 <font class="comment">*/</font>
00879 XMQuestioner::~XMQuestioner()
00880 {
00881   yescallback.UnRegister();
00882   nocallback.UnRegister();
00883 }
00884 
00885 <font class="comment">/*</font>
00886 <font class="comment">** Functional Descriptions:</font>
00887 <font class="comment">**   XMQuestioner::Yescb:</font>
00888 <font class="comment">**      Virtual function called when the yes button is pressed.</font>
00889 <font class="comment">**      default action is to unmanage the dialog box.  This function</font>
00890 <font class="comment">**      is usually overridden.</font>
00891 <font class="comment">**   XMQuestioner::Nocb:</font>
00892 <font class="comment">**      Virtual method called when the no button is pressed.</font>
00893 <font class="comment">**      default action is to unmanage the dialog box.  This function</font>
00894 <font class="comment">**      is sometimes overridden.</font>
00895 <font class="comment">** Formal Parameters:</font>
00896 <font class="comment">**   XMWidget *wid:</font>
00897 <font class="comment">**     The dialog widget itself.</font>
00898 <font class="comment">**   XtPointer userd:</font>
00899 <font class="comment">**     User data ignored by us.</font>
00900 <font class="comment">**   XtPointer calld:</font>
00901 <font class="comment">**     Callback data of the form XmAnyCallbackStruct.</font>
00902 <font class="comment">*/</font>
00903 <font class="keywordtype">void</font> XMQuestioner::Yescb(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer userd, XtPointer calld)
00904 {
00905   UnManage();
00906 }
00907 
00908 <font class="keywordtype">void</font> XMQuestioner::Nocb(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer userd, XtPointer calld)
00909 {
00910   UnManage();
00911 }
00912 
00913 <font class="comment">/*</font>
00914 <font class="comment">** Default help text for selection box widgets.:</font>
00915 <font class="comment">*/</font>
00916 
<a name="l00917"></a><a class="code" href="XMDialogs_8cpp.html#a3">00917</a> <font class="keyword">static</font> <font class="keywordtype">char</font> *<a class="code" href="XMDialogs_8cpp.html#a3">SelectionDefaultHelp</a>[] = {
00918   <font class="stringliteral">"  You are being asked to select an item from the list of choices\n"</font>,
00919   <font class="stringliteral">"in the list box part of the widget.  You can select an item either by\n"</font>,
00920   <font class="stringliteral">"clicking on it with the mouse or by typing it into the text input\n"</font>,
00921   <font class="stringliteral">"area below the list box.  Once you have made your selection, you should\n"</font>,
00922   <font class="stringliteral">"click a button in the action area at the bottom of the dialog where: \n\n"</font>,
00923   <font class="stringliteral">"    Ok          - Will accept your choice and dismiss the dialog\n"</font>,
00924   <font class="stringliteral">"    Apply       - Will accept your choice and leave the dialog displayed\n"</font>,
00925   <font class="stringliteral">"    Cancel      - Will dismiss the dialog without any action\n"</font>,
00926   <font class="stringliteral">"    Help        - Will display this text\n"</font>,
00927   NULL
00928 };
00929 <font class="comment">/*</font>
00930 <font class="comment">** Functional Description:</font>
00931 <font class="comment">**   XMSelector::XMSelector:</font>
00932 <font class="comment">**      This method constructs an instance of a self contained selector</font>
00933 <font class="comment">**      dialog.  A selector dialog is used to choose one item from</font>
00934 <font class="comment">**      a list of choices.  The user's choice can be confined to those in the</font>
00935 <font class="comment">**      list or expanded beyond those in the list. The selector is</font>
00936 <font class="comment">**      Somewhat incomplete and minimally, the client will usually need</font>
00937 <font class="comment">**      to supersede the SetupList and Perform methods.</font>
00938 <font class="comment">** Formal Parameters:</font>
00939 <font class="comment">**    char *n:</font>
00940 <font class="comment">**       Name to be given to the dialog widget.</font>
00941 <font class="comment">**    Widget parent:</font>
00942 <font class="comment">**    XMWidget &amp;parent:</font>
00943 <font class="comment">**       Identifies the parent of this dialog.</font>
00944 <font class="comment">**    char *prompt:</font>
00945 <font class="comment">**       Prompt string (put near the type-in box).</font>
00946 <font class="comment">**    XtPointer cbd:</font>
00947 <font class="comment">**       Data to pass to various callbacks.</font>
00948 <font class="comment">**    ArgList list:</font>
00949 <font class="comment">**       List of resources which override the default resource sets of the</font>
00950 <font class="comment">**       widget.</font>
00951 <font class="comment">**    Cardinal argcount:</font>
00952 <font class="comment">**       Number of override resource value pairs in list.</font>
00953 <font class="comment">*/</font>
00954 XMSelector::XMSelector(<font class="keywordtype">char</font> *name, Widget parent, <font class="keywordtype">char</font> *prompt, 
00955                        XtPointer cbd, ArgList list, Cardinal argcount) :
00956                        XMSelectionDialog(name, parent, prompt, NULL,
00957                                          cbd, list, argcount),
00958                        okbuttonCB(this),
00959                        applybuttonCB(this),
00960                        cancelbuttonCB(this),
00961                        helpbuttonCB(this),
00962                        nomatchCB(this)
00963 {
00964 
00965   <font class="comment">/* Register the callbacks... */</font>
00966 
00967 
00968   okbuttonCB.Register(<font class="keyword">this</font>, XmNokCallback, &amp;XMSelector::OkCb, cbd);
00969   applybuttonCB.Register(<font class="keyword">this</font>, XmNapplyCallback, &amp;XMSelector::ApplyCb, cbd);
00970   cancelbuttonCB.Register(<font class="keyword">this</font>, XmNcancelCallback, &amp;XMSelector::CancelCb, cbd);
00971   nomatchCB.Register(<font class="keyword">this</font>, XmNnoMatchCallback, &amp;XMSelector::NoMatchCb, cbd);
00972   helpbuttonCB.Register(helpbutton, XmNactivateCallback, &amp;XMSelector::HelpCb, cbd);
00973 
00974   <font class="comment">/* Set up the help button with the default help text.: */</font>
00975 
00976   helpbutton-&gt;Enable();
00977   helpinfo.name = <font class="stringliteral">"SelectionHelp"</font>;
00978   helpinfo.dialog = (XMInformationDialog *)NULL;
00979   helpinfo.text   = <a class="code" href="XMDialogs_8cpp.html#a3">SelectionDefaultHelp</a>;
00980 
00981   <font class="comment">/* Set the initial list values: */</font>
00982 
00983   SetupList();
00984 
00985 }
00986 XMSelector::XMSelector(<font class="keywordtype">char</font> *name, <a class="code" href="classXMWidget.html">XMWidget</a> &amp;parent, <font class="keywordtype">char</font> *prompt,
00987                        XtPointer cbd, ArgList list, Cardinal argcount) :
00988                        XMSelectionDialog(name, parent, prompt, NULL,
00989                                          cbd, list, argcount),
00990                        okbuttonCB(this),
00991                        applybuttonCB(this),
00992                        cancelbuttonCB(this),
00993                        helpbuttonCB(this),
00994                        nomatchCB(this)
00995 {
00996 
00997   <font class="comment">/* Register the callbacks... */</font>
00998 
00999 
01000   okbuttonCB.Register(<font class="keyword">this</font>, XmNokCallback, &amp;XMSelector::OkCb, cbd);
01001   applybuttonCB.Register(<font class="keyword">this</font>, XmNapplyCallback, &amp;XMSelector::ApplyCb, cbd);
01002   cancelbuttonCB.Register(<font class="keyword">this</font>, XmNcancelCallback, &amp;XMSelector::CancelCb, cbd);
01003   nomatchCB.Register(<font class="keyword">this</font>, XmNnoMatchCallback, &amp;XMSelector::NoMatchCb, cbd);
01004   helpbuttonCB.Register(helpbutton, XmNactivateCallback, &amp;XMSelector::HelpCb, cbd);
01005 
01006   <font class="comment">/* Set up the help button with the default help text.: */</font>
01007 
01008   helpbutton-&gt;Enable();
01009   helpinfo.name = <font class="stringliteral">"SelectionHelp"</font>;
01010   helpinfo.dialog = (XMInformationDialog *)NULL;
01011   helpinfo.text   = <a class="code" href="XMDialogs_8cpp.html#a3">SelectionDefaultHelp</a>;
01012 
01013   <font class="comment">/* Set up the initial list values: */</font>
01014 
01015   <font class="comment">/* This should be done by a derived class. */</font>
01016 
01017 }
01018 <font class="comment">/*</font>
01019 <font class="comment">** Functional Description:</font>
01020 <font class="comment">**   XMSelector::~XMSelector:</font>
01021 <font class="comment">**     This method is responsible for destroying an instance of the</font>
01022 <font class="comment">**     selector.  The main thing that we need to do is to release the</font>
01023 <font class="comment">**     dynamic storage associated with the callbacks by unregistering them.</font>
01024 <font class="comment">*/</font>
01025 XMSelector::~XMSelector()
01026 {
01027   okbuttonCB.UnRegister();
01028   applybuttonCB.UnRegister();
01029   cancelbuttonCB.UnRegister();
01030   nomatchCB.UnRegister();
01031   helpbuttonCB.UnRegister();
01032 
01033 }
01034 
01035 <font class="comment">/*</font>
01036 <font class="comment">** Functional Description:</font>
01037 <font class="comment">**    XMSelector::SetupList:</font>
01038 <font class="comment">**      This function sets up the initial display list.  This is the</font>
01039 <font class="comment">**      default method which is intended to be overridden by the derived</font>
01040 <font class="comment">**      classes.  The default method does nothing.</font>
01041 <font class="comment">*/</font>
01042 <font class="keywordtype">void</font> XMSelector::SetupList()
01043 {
01044   
01045 }
01046 
01047 <font class="comment">/*</font>
01048 <font class="comment">** Functional Description:</font>
01049 <font class="comment">**    XMSelector::SetHelpText:</font>
01050 <font class="comment">**       This function replaces the help text with user defineable help text</font>
01051 <font class="comment">**       The help text is a list of string pointers to null terminated strings</font>
01052 <font class="comment">**       terminated by a null pointer (see the default help text for an</font>
01053 <font class="comment">**       example.</font>
01054 <font class="comment">** Formal Parameters:</font>
01055 <font class="comment">**    char **newhelp:</font>
01056 <font class="comment">**      New help text.</font>
01057 <font class="comment">*/</font>
01058 <font class="keywordtype">void</font> XMSelector::SetHelpText(<font class="keywordtype">char</font> **newhelp)
01059 {
01060   helpinfo.text = newhelp;
01061 }
01062 <font class="comment">/*</font>
01063 <font class="comment">** Functional Description:</font>
01064 <font class="comment">**   XMSelector::RevertHelpText:</font>
01065 <font class="comment">**     This method restores the default help text.</font>
01066 <font class="comment">*/</font>
01067 <font class="keywordtype">void</font> XMSelector::RevertHelpText()
01068 {
01069   helpinfo.text = <a class="code" href="XMDialogs_8cpp.html#a3">SelectionDefaultHelp</a>;
01070 }
01071 
01072 <font class="comment">/*</font>
01073 <font class="comment">** Functional Descriptions:</font>
01074 <font class="comment">***   XMSelector::OkCb:</font>
01075 <font class="comment">**      Callback for the Ok button of the dialog.</font>
01076 <font class="comment">**    XMSelector::NoMatchCb:</font>
01077 <font class="comment">**      Callback for any click with no match.</font>
01078 <font class="comment">**    XMSelector::ApplyCb:</font>
01079 <font class="comment">**      Callback for apply button.</font>
01080 <font class="comment">**    XMSelector::CancelCb:</font>
01081 <font class="comment">**      Callback for cancel button.</font>
01082 <font class="comment">**    XMSelector::HelpCb:</font>
01083 <font class="comment">**      Callback for help button.</font>
01084 <font class="comment">**</font>
01085 <font class="comment">**   These all take relatively default actions which can be overridden by</font>
01086 <font class="comment">**   the deriver.  Usually, the deriver will override, Perform, however</font>
01087 <font class="comment">**   since the other callbacks give a standardized behavior to the dialog</font>
01088 <font class="comment">**   widget.</font>
01089 <font class="comment">** Formal Parameters:</font>
01090 <font class="comment">**   XMWidget *wid:</font>
01091 <font class="comment">**     The widget which invoked the callback.</font>
01092 <font class="comment">**   XtPointer userd:</font>
01093 <font class="comment">**     user specific call data.</font>
01094 <font class="comment">**   XtPointer cd:</font>
01095 <font class="comment">**     Callback Specific data in this case a pointer to an </font>
01096 <font class="comment">**     XmSelectionBoxCallbackStruct</font>
01097 <font class="comment">*/</font>
01098 <font class="keywordtype">void</font> XMSelector::OkCb(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer userd, XtPointer cd)
01099 {
01100   XmSelectionBoxCallbackStruct *calldata = (XmSelectionBoxCallbackStruct *)cd;
01101 
01102   <font class="keywordflow">if</font>(Perform(wid, userd, 
01103              calldata-&gt;reason, calldata-&gt;value, calldata-&gt;length))
01104     UnManage();
01105   
01106 }
01107 <font class="keywordtype">void</font> XMSelector::ApplyCb(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer userd, XtPointer cd)
01108 {
01109   XmSelectionBoxCallbackStruct *calldata = (XmSelectionBoxCallbackStruct *)cd;
01110 
01111   Perform(wid, userd,
01112           calldata-&gt;reason, calldata-&gt;value, calldata-&gt;length);
01113 }
01114 <font class="keywordtype">void</font> XMSelector::NoMatchCb(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer userd, XtPointer cd)
01115 {
01116   XmSelectionBoxCallbackStruct *calldata = (XmSelectionBoxCallbackStruct *)cd;
01117 
01118   <font class="keywordflow">if</font>(Perform(wid, userd, 
01119              calldata-&gt;reason, calldata-&gt;value, calldata-&gt;length))
01120     UnManage();
01121   
01122 }
01123 
01124 <font class="keywordtype">void</font> XMSelector::CancelCb(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer cd, XtPointer ud)
01125 {
01126   UnManage();
01127 }
01128 
01129 <font class="keywordtype">void</font> XMSelector::HelpCb(<a class="code" href="classXMWidget.html">XMWidget</a> *cb, XtPointer cd, XtPointer ud)
01130 {
01131   <a class="code" href="XMHelp_8cpp.html#a9">XM_display_help</a>(cb, (XtPointer)&amp;helpinfo, ud);
01132 }
01133 
01134 <font class="comment">/*</font>
01135 <font class="comment">** Functional Description:</font>
01136 <font class="comment">**   XMSelector::Perform:</font>
01137 <font class="comment">**     This method is intended to be overridden by the deriver.</font>
01138 <font class="comment">**     In a typical case, the deriver will override SetupLIst and</font>
01139 <font class="comment">**     Perform to get everything needed to do application sensitive list</font>
01140 <font class="comment">**     processing.</font>
01141 <font class="comment">** Formal Parameters:</font>
01142 <font class="comment">*   XMWidget *wid:</font>
01143 <font class="comment">**    The widget invoking us, most often this is the object's this pointer.</font>
01144 <font class="comment">**  XtPointer cd:</font>
01145 <font class="comment">**    User supuplied call data.</font>
01146 <font class="comment">**  int reason:</font>
01147 <font class="comment">**    Why the callback is called, can be any of:</font>
01148 <font class="comment">**     XmCR_APPLY:</font>
01149 <font class="comment">**       The apply button was pressed.</font>
01150 <font class="comment">**     XmCR_OK:</font>
01151 <font class="comment">**       The Ok button was clicked.</font>
01152 <font class="comment">**     XmCR_NO_MATCH:</font>
01153 <font class="comment">**       There was an accept with no match in the field.  Note that</font>
01154 <font class="comment">**       in this case we treat the return value the same as for an accept.</font>
01155 <font class="comment">**     XMString value:</font>
01156 <font class="comment">**       The text representing the user's choice.</font>
01157 <font class="comment">**     int size:</font>
01158 <font class="comment">**       number of characters in the user's choice.</font>
01159 <font class="comment">** Return Value:</font>
01160 <font class="comment">**   True:</font>
01161 <font class="comment">**     Valid action was taken.  The dialog is dismissed if OK or NO_MATCH.</font>
01162 <font class="comment">**   False:</font>
01163 <font class="comment">**     No valid action was taken, the dialog remains if OK or NO_MATCH.</font>
01164 <font class="comment">*/</font>
01165 Boolean XMSelector::Perform(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer cd,
01166                            <font class="keywordtype">int</font> reason, XmString value, <font class="keywordtype">int</font> size)
01167 {
01168   <font class="keywordflow">return</font> True;
01169 }
01170 
01171 <font class="comment">/*</font>
01172 <font class="comment">** The methods in the pages which follow implement the functions of the</font>
01173 <font class="comment">** XMFileSelector dialog.</font>
01174 <font class="comment">*/</font>
01175 
<a name="l01176"></a><a class="code" href="XMDialogs_8cpp.html#a4">01176</a> <font class="keyword">static</font> <font class="keywordtype">char</font> *<a class="code" href="XMDialogs_8cpp.html#a4">FileSelectorHelp</a>[] = <font class="comment">// Default help text for file selector.</font>
01177 {
01178   <font class="stringliteral">"  You are being prompted a filename.  If you know the complete name of\n"</font>,
01179   <font class="stringliteral">"the file, you can type it in at the text box at the bottom of the work\n"</font>,
01180   <font class="stringliteral">"area of the dialog.  If you don't know the name of the file then you can\n"</font>,
01181   <font class="stringliteral">"use the facilities of the file selection box to browse the directory\n"</font>,
01182   <font class="stringliteral">"tree to hunt for a suitable file name.\n"</font>,
01183   <font class="stringliteral">"    The left list is the set of directories one level below the current\n"</font>,
01184   <font class="stringliteral">"directory.  There's also a "</font>,
01185 <font class="preprocessor">#ifdef unix</font>
01186 <font class="preprocessor"></font>                              <font class="stringliteral">".. for the next level up.  "</font>,
01187 <font class="preprocessor">#elif VMS</font>
01188 <font class="preprocessor"></font>                              <font class="stringliteral">"[-] for the next level up. "</font>,
01189 <font class="preprocessor">#endif</font>
01190 <font class="preprocessor"></font>                                                         <font class="stringliteral">"To move into one\n"</font>,
01191   <font class="stringliteral">"of these directories double click on the directory name in the left box\n"</font>,
01192   <font class="stringliteral">"   The text type-in at the top of the work area allows you to type in\n"</font>,
01193   <font class="stringliteral">"an arbitrary filter string.  A filter string consists of a directory\n"</font>,
01194   <font class="stringliteral">"specification and a file search string which can contain wild card\n"</font>,
01195   <font class="stringliteral">"characters (and usually does to be useful).  Typing in a new filter\n"</font>,
01196   <font class="stringliteral">"string and hitting return or clicking on the Filter button will move you\n"</font>,
01197   <font class="stringliteral">"to the appropriate directory and display the files matching the search\n"</font>,
01198   <font class="stringliteral">"string in the right hand list\n"</font>,
01199   <font class="stringliteral">"   The right list contains the set of files in the current directory\n"</font>,
01200   <font class="stringliteral">"which match the search string.  To select a file you can click on it\n"</font>,
01201   <font class="stringliteral">"Double clicking is identical to a click followed by clicking the Ok \n"</font>,
01202   <font class="stringliteral">"button.\n"</font>,
01203   <font class="stringliteral">"   The buttons at the bottom of the dialog perform the following actions\n"</font>,
01204   <font class="stringliteral">"when clicked:\n\n"</font>,
01205   <font class="stringliteral">"     Ok      - Accepts the selection and dismisses the dialog.\n"</font>,
01206   <font class="stringliteral">"     Filter  - Re-applies the search string in the current directory\n"</font>,
01207   <font class="stringliteral">"     Cancel  - Dismisses the dialog without accepting any filename.\n"</font>,
01208   <font class="stringliteral">"     Help    - Displays this help text\n"</font>,
01209   NULL
01210 };
01211 
01212 <font class="comment">/*</font>
01213 <font class="comment">** Functional Description:</font>
01214 <font class="comment">**   XMFileSelector::XMFileSelector:</font>
01215 <font class="comment">**     This method constructs an instance of a file selector dialog.</font>
01216 <font class="comment">**     The file selector dialog is a self contained Motif widget which</font>
01217 <font class="comment">**     allows the user to choose a filename.   Constructing an instance</font>
01218 <font class="comment">**     consists of:</font>
01219 <font class="comment">**       1. Calling the constructor for XMFileListDialog to build the widget.</font>
01220 <font class="comment">**       2. Calling the constructors for the callback elements to set their</font>
01221 <font class="comment">**          object fields.</font>
01222 <font class="comment">**       3. Registering the callback functions.  The callback functions are</font>
01223 <font class="comment">**          intended to be overridden, if necessary, by the client.</font>
01224 <font class="comment">**       4. Setting up the default help text.  The SetHelpText method</font>
01225 <font class="comment">**          allows a client to supply application specific help text. </font>
01226 <font class="comment">**</font>
01227 <font class="comment">** Formal Parameters:</font>
01228 <font class="comment">**   char *n:</font>
01229 <font class="comment">**      Specifies the name of the dialog widget.  This will also appear</font>
01230 <font class="comment">**      in the banner of the dialog.</font>
01231 <font class="comment">**   Widget parent:</font>
01232 <font class="comment">**   XMWidget &amp;parent:</font>
01233 <font class="comment">**      Specifies which widget or widget object will be the parent of the</font>
01234 <font class="comment">**      dialog widget shell.</font>
01235 <font class="comment">**   XtPointer ud:</font>
01236 <font class="comment">**      User data passed to the callback methods.  This defaults to NULL.</font>
01237 <font class="comment">**   char *directory:</font>
01238 <font class="comment">**      Specifies the initial search directory.  Note that if the</font>
01239 <font class="comment">**      search directory is not specified, then the XMFILE_DEFAULT_DIRMASK</font>
01240 <font class="comment">**      is used instead.  This corresponds to the current working directory</font>
01241 <font class="comment">**      as of the time Xamine was started.</font>
01242 <font class="comment">** Note:</font>
01243 <font class="comment">**    There is more than one constructor binding.</font>
01244 <font class="comment">*/</font>
01245 
01246 XMFileSelector::XMFileSelector(<font class="keywordtype">char</font> *n, Widget parent, XtPointer calld,
01247                                <font class="keywordtype">char</font> *directory) :
01248                  XMFileListDialog(n, parent, directory),
01249                  okcb(this),
01250                  nomatchcb(this),
01251                  filtercb(this),
01252                  cancelcb(this),
01253                  helpcb(this)
01254 {
01255   <font class="comment">/* Register the callbacks, note that apply is usurped for the filter </font>
01256 <font class="comment">  ** function (Motif's decision, not mine). </font>
01257 <font class="comment">  */</font>
01258 
01259   okcb.Register(<font class="keyword">this</font>, XmNokCallback, &amp;XMFileSelector::FilterCb, calld);
01260   nomatchcb.Register(<font class="keyword">this</font>, XmNnoMatchCallback, <font class="comment">// Requires XmNmustMatch to be</font>
01261                      &amp;XMFileSelector::NomatchCb, calld);               <font class="comment">// True to invoke.</font>
01262   filtercb.Register(<font class="keyword">this</font>, XmNapplyCallback, &amp;XMFileSelector::FilterCb, calld);
01263   cancelcb.Register(<font class="keyword">this</font>, XmNcancelCallback, &amp;XMFileSelector::CancelCb, calld);
01264   helpcb.Register(<font class="keyword">this</font>, XmNhelpCallback, &amp;XMFileSelector::HelpCb, calld);
01265 
01266   <font class="comment">/* Set up the help info data structure */</font>
01267 
01268   helpinfo.name = <font class="stringliteral">"File_Selection_Help"</font>;
01269   helpinfo.dialog = (XMInformationDialog *)NULL;
01270   RevertHelpText();
01271 }   
01272 XMFileSelector::XMFileSelector(<font class="keywordtype">char</font> *n, <a class="code" href="classXMWidget.html">XMWidget</a> &amp;parent,
01273                                XtPointer calld, 
01274                                <font class="keywordtype">char</font> *directory) :
01275                 XMFileListDialog(n, parent, directory),
01276                 okcb(this),
01277                 nomatchcb(this),
01278                 filtercb(this),
01279                 cancelcb(this),
01280                 helpcb(this)
01281 {
01282   <font class="comment">/* Register the callbacks, note that apply is usurped for the filter </font>
01283 <font class="comment">  ** function (Motif's decision, not mine). </font>
01284 <font class="comment">  */</font>
01285 
01286   okcb.Register(<font class="keyword">this</font>, XmNokCallback, &amp;XMFileSelector::OkCb, calld);
01287   nomatchcb.Register(<font class="keyword">this</font>, XmNnoMatchCallback, <font class="comment">// Requires XmNmustMatch to be</font>
01288                      &amp;XMFileSelector::NomatchCb, calld);               <font class="comment">// True to invoke.</font>
01289   filtercb.Register(<font class="keyword">this</font>, XmNapplyCallback, &amp;XMFileSelector::FilterCb, calld);
01290   cancelcb.Register(<font class="keyword">this</font>, XmNcancelCallback, &amp;XMFileSelector::CancelCb, calld);
01291   helpcb.Register(<font class="keyword">this</font>, XmNhelpCallback, &amp;XMFileSelector::HelpCb, calld);
01292 
01293   <font class="comment">/* Set up the help info data structure */</font>
01294 
01295   helpinfo.name = <font class="stringliteral">"File_Selection_Help"</font>;
01296   helpinfo.dialog = (XMInformationDialog *)NULL;
01297   RevertHelpText();
01298   
01299   <font class="comment">/* Enable the help button: */</font>
01300 
01301   helpbutton-&gt;Enable();
01302 }
01303 
01304 <font class="comment">/*</font>
01305 <font class="comment">** Functional Description:</font>
01306 <font class="comment">**   XMFileSelector::~XMFileSelector:</font>
01307 <font class="comment">**      This method destroys the file selector widget.  The only dynamic</font>
01308 <font class="comment">**      storage that exists is associated with the registerd callbacks.</font>
01309 <font class="comment">**      Therefore we unregister all callbacks.</font>
01310 <font class="comment">*/</font>
01311 
01312 XMFileSelector::~XMFileSelector()
01313 {
01314   okcb.UnRegister();
01315   nomatchcb.UnRegister();
01316   filtercb.UnRegister();
01317   cancelcb.UnRegister();
01318   helpcb.UnRegister();
01319 }   
01320 
01321 <font class="comment">/*</font>
01322 <font class="comment">** Functional Description:</font>
01323 <font class="comment">**   XMFileSelector::SetHelpText:</font>
01324 <font class="comment">**     This function sets the help text associated with the widget.</font>
01325 <font class="comment">** Formal Parameters:</font>
01326 <font class="comment">**   char **text:</font>
01327 <font class="comment">**     This is a list of character string pointers terminated by a null</font>
01328 <font class="comment">**     pointer.  Each string itself is Null terminated.</font>
01329 <font class="comment">*/</font>
01330 <font class="keywordtype">void</font> XMFileSelector::SetHelpText(<font class="keywordtype">char</font> **text)
01331 {
01332   helpinfo.text = text;
01333 }   
01334 
01335 <font class="comment">/*</font>
01336 <font class="comment">** FunctionalDescription:</font>
01337 <font class="comment">**   XMFileSelector::RevertHelpText:</font>
01338 <font class="comment">**     Reverts the help text to the default text.</font>
01339 <font class="comment">*/</font>
01340 
01341 <font class="keywordtype">void</font> XMFileSelector::RevertHelpText()
01342 {
01343   helpinfo.text = <a class="code" href="XMDialogs_8cpp.html#a4">FileSelectorHelp</a>;
01344 }   
01345 
01346 
01347 <font class="comment">/*</font>
01348 <font class="comment">** The functions which follow are hooked in to the callbacks.</font>
01349 <font class="comment">** While they can be overridden, they provide default behavior which is</font>
01350 <font class="comment">** in keeping with the Motif style guide usage of these widgets.  It's best</font>
01351 <font class="comment">** to only override the Perform method which is defined as a NOP so that</font>
01352 <font class="comment">** the base class is testable.</font>
01353 <font class="comment">*/</font>
01354 
01355 <font class="comment">/*</font>
01356 <font class="comment">** Functional Description:</font>
01357 <font class="comment">**   Boolean Perform:</font>
01358 <font class="comment">**     This function takes application dependent action on accepted filenames.</font>
01359 <font class="comment">**     This function is normally overridden in classes derived from the</font>
01360 <font class="comment">**     XMFileSelector with an application specific method.</font>
01361 <font class="comment">**     </font>
01362 <font class="comment">** Parameters:</font>
01363 <font class="comment">**   XMWidget *wid:</font>
01364 <font class="comment">**     Pointer to the widget object which invokes us...usually this dialog.</font>
01365 <font class="comment">**   XtPointer ud:</font>
01366 <font class="comment">**     User supplied data supplied at constructor time.</font>
01367 <font class="comment">**   char *filename:</font>
01368 <font class="comment">**     The name of the file which was received from the user.</font>
01369 <font class="comment">**   int reason:</font>
01370 <font class="comment">**     The callback reason which can be either of:</font>
01371 <font class="comment">**        XmCR_OK       - Ok button was pressed.</font>
01372 <font class="comment">**        XmCR_NO_MATCH - Chooser in must match mode and file entered not on</font>
01373 <font class="comment">**                        list.</font>
01374 <font class="comment">**        XmCR_APPLY    - Is only possible if the FilterCb method is</font>
01375 <font class="comment">**                        overridden with a method which calls Perform or</font>
01376 <font class="comment">**                        OkCb.</font>
01377 <font class="comment">**     </font>
01378 <font class="comment">** Returns:</font>
01379 <font class="comment">**   True   - If the required function was performed, and the dialog</font>
01380 <font class="comment">**            can be dismissed if appropriate.</font>
01381 <font class="comment">**   False  - If the client would like the dialog to remain.</font>
01382 <font class="comment">*/</font>
01383 Boolean XMFileSelector::Perform(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer ud, 
01384                                 <font class="keywordtype">char</font> *filename, <font class="keywordtype">int</font> reason)
01385 {
01386   <font class="keywordflow">return</font> True;                  <font class="comment">// Default to No-Op all done with dialog.</font>
01387 }
01388 
01389 <font class="comment">/*</font>
01390 <font class="comment">** Functional Description:</font>
01391 <font class="comment">**   XMFileSelector::OkCb:</font>
01392 <font class="comment">**     Method called when the Ok button is clicked.  We repackage the</font>
01393 <font class="comment">**     filename string as an ASCIZ C string and call the Perform method.</font>
01394 <font class="comment">**     If Perform returns true, then we unmanage the dialog.  The user must</font>
01395 <font class="comment">**     explicitly destroy the dialog since:</font>
01396 <font class="comment">**       a) We don't know if the dialog is dynamically allocated.</font>
01397 <font class="comment">**       b) Even if it is dynamic, the user may want to cache it for later use.</font>
01398 <font class="comment">** Formal Parameters:</font>
01399 <font class="comment">**   XMWidget *wid:</font>
01400 <font class="comment">**     This pointer usually.</font>
01401 <font class="comment">**   XtPointer ud:</font>
01402 <font class="comment">**     User data passed to perform without interpretation.</font>
01403 <font class="comment">**   XtPointer cd:</font>
01404 <font class="comment">**     Call data which is of the form of a pointer to an </font>
01405 <font class="comment">**     XmFileSelectionBoxCallbackStruct (whew).  Where value and length</font>
01406 <font class="comment">**     describe the filename.</font>
01407 <font class="comment">*/</font>
01408 <font class="keywordtype">void</font> XMFileSelector::OkCb(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer ud, XtPointer cd)
01409 {
01410   <font class="comment">/* Pull the string out of the callback structure:  */</font>
01411 
01412   XmFileSelectionBoxCallbackStruct *calldata = 
01413       (XmFileSelectionBoxCallbackStruct *)cd;
01414 
01415   <font class="keywordtype">char</font> *filename;
01416 
01417   <font class="keywordflow">if</font>(!XmStringGetLtoR(calldata-&gt;value, XmSTRING_DEFAULT_CHARSET,
01418                       &amp;filename)) {
01419     <font class="keyword">new</font> XMErrorDialog(<font class="stringliteral">"Error Message"</font>,
01420                       *wid,
01421                       <font class="stringliteral">"Unable to retrieve filename string"</font>,
01422                       XMDestroyWidget);
01423   }
01424   <font class="keywordflow">else</font> {
01425     <font class="keywordflow">if</font>(Perform(wid, ud, filename, calldata-&gt;reason)) {
01426       UnManage();
01427     }
01428     XtFree(filename);
01429   }
01430 }
01431 
01432 <font class="comment">/*</font>
01433 <font class="comment">** Functional Description:</font>
01434 <font class="comment">**   XMFileSelector::NomatchCb:</font>
01435 <font class="comment">**      Called when the user types in a filename not in the list.</font>
01436 <font class="comment">**      In this case we really could just call *our* OkCb since</font>
01437 <font class="comment">**      that routine passes the reason from the callback data rather</font>
01438 <font class="comment">**      than assuming it's XmCR_OK</font>
01439 <font class="comment">** Formal Parameters:</font>
01440 <font class="comment">**   XMWidget *wid:</font>
01441 <font class="comment">**     This pointer usually.</font>
01442 <font class="comment">**   XtPointer ud:</font>
01443 <font class="comment">**     User data passed to perform without interpretation.</font>
01444 <font class="comment">**   XtPointer cd:</font>
01445 <font class="comment">**     Call data which is of the form of a pointer to an </font>
01446 <font class="comment">**     XmFileSelectionBoxCallbackStruct (whew).  Where value and length</font>
01447 <font class="comment">**     describe the filename.</font>
01448 <font class="comment">*/</font>
01449 
01450 <font class="keywordtype">void</font> XMFileSelector::NomatchCb(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer ud, XtPointer cd)
01451 {
01452   XMFileSelector::OkCb(wid, ud, cd); <font class="comment">// Make sure it's *our* OkCb that's called</font>
01453 }
01454 
01455 <font class="comment">/*</font>
01456 <font class="comment">** Functional Description:</font>
01457 <font class="comment">**   XMFileSelector::FilterCb:</font>
01458 <font class="comment">**     This function is called when the filter button is pressed.</font>
01459 <font class="comment">**     This function is a No-op because I believe that the filter button</font>
01460 <font class="comment">**     has a callback attached by motif to do the actual filtering.</font>
01461 <font class="comment">**     The callback is intended for any application specific processing</font>
01462 <font class="comment">**     that might be required.</font>
01463 <font class="comment">** Formal Parameters:</font>
01464 <font class="comment">**   as for any callback</font>
01465 <font class="comment">*/</font>
01466 
01467 <font class="keywordtype">void</font> XMFileSelector::FilterCb(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer ud, XtPointer cd)
01468 {
01469 }   
01470 
01471 <font class="comment">/*</font>
01472 <font class="comment">** Functional Description:</font>
01473 <font class="comment">**   XMFileSelector::CancelCb:</font>
01474 <font class="comment">**     This method is called when the cancel button is pressed.</font>
01475 <font class="comment">**     The default action is to unmanage the dialog.</font>
01476 <font class="comment">** Formal Parameters:</font>
01477 <font class="comment">**   As for all callbacks, ignored in this case.</font>
01478 <font class="comment">*/</font>
01479 
01480 <font class="keywordtype">void</font> XMFileSelector::CancelCb(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer ud, XtPointer cd)
01481 {
01482   UnManage();
01483 }   
01484 
01485 <font class="comment">/*</font>
01486 <font class="comment">** Functional Description:</font>
01487 <font class="comment">**   XMFileSelector::HelpCb:</font>
01488 <font class="comment">**     This function is called when the help button is pressed.  The</font>
01489 <font class="comment">**     default action is to display a help dialog described by the</font>
01490 <font class="comment">**     helpinfo attribute.  The text in this dialog can be altered</font>
01491 <font class="comment">**     by clients using the SetHelpText method.  Further fancier stuff</font>
01492 <font class="comment">**     can be done by superseding this method.</font>
01493 <font class="comment">** Formal Parameters:</font>
01494 <font class="comment">**   XMWidget *wid:</font>
01495 <font class="comment">**    Usually the pointer to the help button.</font>
01496 <font class="comment">**   XtPointer ud:</font>
01497 <font class="comment">**    Userdata ignored.</font>
01498 <font class="comment">**   XtPointer cd:</font>
01499 <font class="comment">**    Call data ignored.</font>
01500 <font class="comment">*/</font>
01501 
01502 <font class="keywordtype">void</font> XMFileSelector::HelpCb(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer ud, XtPointer cd)
01503 {
01504   <a class="code" href="XMHelp_8cpp.html#a9">XM_display_help</a>(<font class="keyword">this</font>, &amp;helpinfo);
01505 }   
01506    
01507 
01508 <font class="comment">/*</font>
01509 <font class="comment">** The following pages define the self contained custom dialog box class</font>
01510 <font class="comment">** method functions.  A self contained custom dialog box (XMCustomDialogBox)</font>
01511 <font class="comment">** is derived from the XMCustomDialog in a manner which allows it to have</font>
01512 <font class="comment">** callback methods rather than external functions as the button methods.</font>
01513 <font class="comment">*/</font>
01514 
01515 <font class="comment">/*</font>
01516 <font class="comment">** We provide default help text for the custom dialog box, however because</font>
01517 <font class="comment">** it is really difficult to generically describe a custom dialog box,</font>
01518 <font class="comment">** the user will typically have to replace this text using SetHelpText.</font>
01519 <font class="comment">*/</font>
<a name="l01520"></a><a class="code" href="XMDialogs_8cpp.html#a5">01520</a> <font class="keyword">static</font> <font class="keywordtype">char</font> *<a class="code" href="XMDialogs_8cpp.html#a5">custom_help</a>[] = {
01521   <font class="stringliteral">"  This is a custom dialog box which was created by a programmer that was\n"</font>,
01522   <font class="stringliteral">"too lazy to supply detailed help text about what the dialog does.  Since\n"</font>,
01523   <font class="stringliteral">"the work area of the dialog box could be almost anything, I cannot be\n"</font>,
01524   <font class="stringliteral">"much of a help about what to do there.  What I can say, however is that\n"</font>,
01525   <font class="stringliteral">"after you've done what you need to do in the work area, you should select\n"</font>,
01526   <font class="stringliteral">"one of the following buttons from the action area:\n\n"</font>,
01527   <font class="stringliteral">"    Ok     - Generally accepts what ever you've done and removes the\n"</font>,
01528   <font class="stringliteral">"             dialog box assuming everything was done properly\n"</font>,
01529   <font class="stringliteral">"    Apply  - Generally the same as Ok, but leaves the dialog box up.\n"</font>,
01530   <font class="stringliteral">"    Cancel - Generally takes no action, but dismisses the dialog box\n"</font>,
01531   <font class="stringliteral">"    Help   - Causes this helpful message to appear.\n\n"</font>,
01532   <font class="stringliteral">"NOTE:  If you know who wrote this program, then bother the hell out of \n"</font>,
01533   <font class="stringliteral">"       that person to replace this help text with something more specific\n"</font>,
01534   <font class="stringliteral">"       to the application\n"</font>,
01535   NULL
01536 };
01537 
01538 <font class="comment">/*</font>
01539 <font class="comment">** Functional Description:</font>
01540 <font class="comment">**   XMCustomDialogBox:</font>
01541 <font class="comment">**      These functions instantiate a custom dialog box.  A custom dialog</font>
01542 <font class="comment">**      box is a self contained dialog box with a work area filled in by the</font>
01543 <font class="comment">**      box creator.  Therefore this class just provides some common behavior</font>
01544 <font class="comment">**      and the client is expected to subclass an appropriate version for</font>
01545 <font class="comment">**      The desired needs. </font>
01546 <font class="comment">** Formal Parameters:</font>
01547 <font class="comment">**   char *name:</font>
01548 <font class="comment">**     Name of the custom dialog box (actually top level shell name).</font>
01549 <font class="comment">**   XMWidget &amp;parent:</font>
01550 <font class="comment">**     References the widget which will parent the widget tree that we're</font>
01551 <font class="comment">**     creating.</font>
01552 <font class="comment">**   char *title:</font>
01553 <font class="comment">**     The text which will be placed in the banner of the dialog.</font>
01554 <font class="comment">**   ArgList l:</font>
01555 <font class="comment">**     List of resources which will be applied at widget creation time.</font>
01556 <font class="comment">**   Cardinal num_args:</font>
01557 <font class="comment">**     Number of arguments in l.</font>
01558 <font class="comment">*/</font>
01559 
01560 XMCustomDialogBox::XMCustomDialogBox(<font class="keywordtype">char</font> *name,<a class="code" href="classXMWidget.html">XMWidget</a> &amp;parent, <font class="keywordtype">char</font> *title,
01561                                      ArgList l, Cardinal num_args) :
01562                    XMCustomDialog(name, parent, title, l, num_args),
01563                    OkCb(this),
01564                    ApplyCb(this),
01565                    CancelCb(this),
01566                    HelpCb(this)
01567 {
01568   SetCallbacks();               <font class="comment">// Register the callbacks.</font>
01569   RevertHelpText();             <font class="comment">// And set the default help text.</font>
01570 }   
01571 
01572 XMCustomDialogBox::XMCustomDialogBox(<font class="keywordtype">char</font> *name, Widget parent, <font class="keywordtype">char</font> *title,
01573                                      ArgList l, Cardinal num_args) :
01574                    XMCustomDialog(name, parent, title, l, num_args),
01575                    OkCb(this),
01576                    ApplyCb(this),
01577                    CancelCb(this),
01578                    HelpCb(this)
01579 {
01580   SetCallbacks();               <font class="comment">// Register the callbacks.</font>
01581   InitializeHelp();             <font class="comment">// And set the default help text.</font>
01582 }   
01583 
01584 
01585 <font class="comment">/*</font>
01586 <font class="comment">** Functional Description:</font>
01587 <font class="comment">**   XMCustomDialogBox::~XMCustomDialogBox</font>
01588 <font class="comment">**     This method deletes a custom dialog box.  The only thing required</font>
01589 <font class="comment">**     is to unregister all of the callbacks.</font>
01590 <font class="comment">*/</font>
01591 
01592 XMCustomDialogBox::~XMCustomDialogBox()
01593 {
01594   OkCb.UnRegister();
01595   ApplyCb.UnRegister();
01596   CancelCb.UnRegister();
01597   HelpCb.UnRegister();
01598 
01599 }   
01600 
01601 <font class="comment">/*</font>
01602 <font class="comment">** This page contains functions to manage and setup the help text in case</font>
01603 <font class="comment">** the user (as they should) decides to override the default help text</font>
01604 <font class="comment">*/</font>
01605 
01606 <font class="comment">/*</font>
01607 <font class="comment">** Functional Description:</font>
01608 <font class="comment">**   XMCustomDialogBox::SetHelpText:</font>
01609 <font class="comment">**     Overrides the default help text.</font>
01610 <font class="comment">** Formal Parameters:</font>
01611 <font class="comment">**   char **help:</font>
01612 <font class="comment">**    Points to the help text string list.</font>
01613 <font class="comment">*/</font>
01614 
01615 <font class="keywordtype">void</font> XMCustomDialogBox::SetHelpText(<font class="keywordtype">char</font> **help)
01616 {
01617   help_info.text = help;        <font class="comment">// Set new help text.</font>
01618 }   
01619 
01620 <font class="comment">/*</font>
01621 <font class="comment">** Functional Description:</font>
01622 <font class="comment">**   XMCustomDialogBox::RevertHelpText:</font>
01623 <font class="comment">**      Reverts to default help text.</font>
01624 <font class="comment">*/</font>
01625 
01626 <font class="keywordtype">void</font> XMCustomDialogBox::RevertHelpText()
01627 {
01628   help_info.text = <a class="code" href="XMDialogs_8cpp.html#a5">custom_help</a>;
01629 }   
01630 
01631 <font class="comment">/*</font>
01632 <font class="comment">** This page contains callback functions. As for all of the </font>
01633 <font class="comment">** self contained dialogs, the Ok and Apply callbacks will call a Perform</font>
01634 <font class="comment">** function which does the application specific stuff, while the </font>
01635 <font class="comment">** Ok and Apply callback functions take care of widget management.</font>
01636 <font class="comment">** We also supply a help callback and a cancel callback which should be </font>
01637 <font class="comment">** sufficient for most of our needs.</font>
01638 <font class="comment">*/</font>
01639 
01640 <font class="comment">/*</font>
01641 <font class="comment">** Functional Description:</font>
01642 <font class="comment">**   XMCustomDialogBox::perform:</font>
01643 <font class="comment">**     This virtual function must be overridden by a subclasser to make the</font>
01644 <font class="comment">**     dialog do anything useful.  Default action is to dismiss the dialog</font>
01645 <font class="comment">**     without taking any action (like Cancel).</font>
01646 <font class="comment">** Formal Parameters:</font>
01647 <font class="comment">**   XMWidget *wid:</font>
01648 <font class="comment">**     Points to the widget that called us.  This will typically be the</font>
01649 <font class="comment">**     appropriate button widget.</font>
01650 <font class="comment">**   XtPointer cli:</font>
01651 <font class="comment">**     This is the client data which was established on the registration of the</font>
01652 <font class="comment">**     callback.  Currently this is one of XmCR_APPLY, if the apply button was</font>
01653 <font class="comment">**     hit or XmCR_OK if the OK button was the one that was hit.</font>
01654 <font class="comment">**   XtPointer call:</font>
01655 <font class="comment">**     This is the call data which in the case of this class is a pointer to</font>
01656 <font class="comment">**      XmPushButtonCallbackStruct.</font>
01657 <font class="comment">** Returns:</font>
01658 <font class="comment">**   True:</font>
01659 <font class="comment">**      If the user's function was successfully accomplished.</font>
01660 <font class="comment">**   False:</font>
01661 <font class="comment">**      If the user's function was not accomplished.</font>
01662 <font class="comment">*/</font>
01663 Boolean XMCustomDialogBox::Perform(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer cli, 
01664                                    XtPointer call)
01665 {
01666   <font class="keywordflow">return</font> True;
01667 }   
01668 
01669 <font class="comment">/*</font>
01670 <font class="comment">** Functional Description:</font>
01671 <font class="comment">**   XMCustomDialogBox::OkPressed:</font>
01672 <font class="comment">**     This method is called when the Ok button is pressed.  It calls</font>
01673 <font class="comment">**     Perform() and unmanages the dialog box if Perform returns True.</font>
01674 <font class="comment">** Formal Parameters:</font>
01675 <font class="comment">**   XMWidget *wid:</font>
01676 <font class="comment">**     Points to the widget that called us.  This will typically be the</font>
01677 <font class="comment">**     appropriate button widget.</font>
01678 <font class="comment">**   XtPointer cli:</font>
01679 <font class="comment">**     This is the client data which was established on the registration of the</font>
01680 <font class="comment">**     callback.  Currently this is one of XmCR_APPLY, if the apply button was</font>
01681 <font class="comment">**     hit or XmCR_OK if the OK button was the one that was hit.</font>
01682 <font class="comment">**   XtPointer call:</font>
01683 <font class="comment">**     This is the call data which in the case of this class is a pointer to</font>
01684 <font class="comment">**      XmPushButtonCallbackStruct.</font>
01685 <font class="comment">*/</font>
01686 <font class="keywordtype">void</font> XMCustomDialogBox::OkPressed(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer cli, XtPointer call)
01687 {
01688   <font class="keywordflow">if</font>(Perform(wid, cli, call))
01689     UnManage();
01690 }   
01691 
01692 <font class="comment">/*</font>
01693 <font class="comment">** Functional Description:</font>
01694 <font class="comment">**   XMCustomDialogBox::ApplyPressed:</font>
01695 <font class="comment">**    Processes the Apply button.  We keep the dialog box displayed</font>
01696 <font class="comment">**    no matter what happens.</font>
01697 <font class="comment">** Formal Parameters:</font>
01698 <font class="comment">**   XMWidget *wid:</font>
01699 <font class="comment">**     Points to the widget that called us.  This will typically be the</font>
01700 <font class="comment">**     appropriate button widget.</font>
01701 <font class="comment">**   XtPointer cli:</font>
01702 <font class="comment">**     This is the client data which was established on the registration of the</font>
01703 <font class="comment">**     callback.  Currently this is one of XmCR_APPLY, if the apply button was</font>
01704 <font class="comment">**     hit or XmCR_OK if the OK button was the one that was hit.</font>
01705 <font class="comment">**   XtPointer call:</font>
01706 <font class="comment">**     This is the call data which in the case of this class is a pointer to</font>
01707 <font class="comment">**      XmPushButtonCallbackStruct.</font>
01708 <font class="comment">*/</font>
01709 <font class="keywordtype">void</font> XMCustomDialogBox::ApplyPressed(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer cli, 
01710                                      XtPointer call)
01711 {
01712   Perform(wid, cli, call);
01713 }   
01714 
01715 <font class="comment">/*</font>
01716 <font class="comment">** Functional Description:</font>
01717 <font class="comment">**   XMCustomDialogBox::CancelPressed:</font>
01718 <font class="comment">**     This method is called when the cancel button was pressed.  We just</font>
01719 <font class="comment">**     UnManage the dialog.</font>
01720 <font class="comment">** Formal Parameters:</font>
01721 <font class="comment">**   XMWidget *wid:</font>
01722 <font class="comment">**     Points to the widget that called us.  This will typically be the</font>
01723 <font class="comment">**     appropriate button widget.</font>
01724 <font class="comment">**   XtPointer cli:</font>
01725 <font class="comment">**     This is the client data which was established on the registration of the</font>
01726 <font class="comment">**     callback.  Currently this is one of XmCR_APPLY, if the apply button was</font>
01727 <font class="comment">**     hit or XmCR_OK if the OK button was the one that was hit.</font>
01728 <font class="comment">**   XtPointer call:</font>
01729 <font class="comment">**     This is the call data which in the case of this class is a pointer to</font>
01730 <font class="comment">**      XmPushButtonCallbackStruct.</font>
01731 <font class="comment">*/</font>
01732 
01733 <font class="keywordtype">void</font> XMCustomDialogBox::CancelPressed(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer cli, 
01734                                       XtPointer call)
01735 {
01736   UnManage();
01737 }   
01738 
01739 <font class="comment">/*</font>
01740 <font class="comment">** Functional Description:</font>
01741 <font class="comment">**   XMCustomDialogBox::HelpPressed:</font>
01742 <font class="comment">**     Called in response to the help button.  We display the help text</font>
01743 <font class="comment">**     in a popup message dialog box.</font>
01744 <font class="comment">** Formal Parameters:</font>
01745 <font class="comment">**   XMWidget *wid:</font>
01746 <font class="comment">**     Points to the widget that called us.  This will typically be the</font>
01747 <font class="comment">**     appropriate button widget.</font>
01748 <font class="comment">**   XtPointer cli:</font>
01749 <font class="comment">**     This is the client data which was established on the registration of the</font>
01750 <font class="comment">**     callback.  Currently this is one of XmCR_APPLY, if the apply button was</font>
01751 <font class="comment">**     hit or XmCR_OK if the OK button was the one that was hit.</font>
01752 <font class="comment">**   XtPointer call:</font>
01753 <font class="comment">**     This is the call data which in the case of this class is a pointer to</font>
01754 <font class="comment">**      XmPushButtonCallbackStruct.</font>
01755 <font class="comment">*/</font>
01756 <font class="keywordtype">void</font> XMCustomDialogBox::HelpPressed(<a class="code" href="classXMWidget.html">XMWidget</a> *wid, XtPointer cli, 
01757                                     XtPointer call)
01758 {
01759   <a class="code" href="XMHelp_8cpp.html#a9">XM_display_help</a>(<font class="keyword">this</font>, &amp;help_info);
01760 }
01761 
01762 <font class="comment">/*</font>
01763 <font class="comment">** The functions on this page implement the private functions of the </font>
01764 <font class="comment">** XMCustomDialogBox class.   These functions are used by the</font>
01765 <font class="comment">** constructors to provide common code paths for the typical constructor</font>
01766 <font class="comment">** duties.</font>
01767 <font class="comment">*/</font>
01768 
01769 
01770 <font class="comment">/*</font>
01771 <font class="comment">** Functional Description:</font>
01772 <font class="comment">**   XMCustomDialogBox::InitializeHelp:</font>
01773 <font class="comment">**     This function sets up the help client data for the first time.</font>
01774 <font class="comment">*/</font>
01775 
01776 <font class="keywordtype">void</font> XMCustomDialogBox::InitializeHelp()
01777 {
01778   help_info.name   = <font class="stringliteral">"Custom Dialog Box"</font>;
01779   help_info.dialog = (XMInformationDialog *)NULL;
01780   help_info.text   = <a class="code" href="XMDialogs_8cpp.html#a5">custom_help</a>;
01781 }
01782 
01783 <font class="comment">/*</font>
01784 <font class="comment">** Functional Description:</font>
01785 <font class="comment">**   XMCustomDialogBox::SetCallbacks:</font>
01786 <font class="comment">**     This function registers the callback methods.</font>
01787 <font class="comment">*/</font>
01788 
01789 <font class="keywordtype">void</font> XMCustomDialogBox::SetCallbacks()
01790 {
01791   OkCb.Register(Ok, XmNactivateCallback, &amp;XMCustomDialogBox::OkPressed, 
01792                 (XtPointer)XmCR_OK);
01793   ApplyCb.Register(Apply, XmNactivateCallback, &amp;XMCustomDialogBox::ApplyPressed, 
01794                    (XtPointer)XmCR_APPLY);
01795   CancelCb.Register(Cancel, XmNactivateCallback, &amp;XMCustomDialogBox::CancelPressed, NULL);
01796   HelpCb.Register(Help, XmNactivateCallback, &amp;XMCustomDialogBox::HelpPressed, NULL);
01797 }   
</pre></div><hr><address align="right"><small>Generated on Tue Feb 4 12:34:59 2003 for Spectrodaq External Event Framework by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
