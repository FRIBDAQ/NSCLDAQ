NSCLDAQ-7.1

7.1-005 3/31/03
    -  Allow Readout/Active.cpp Active::EndRun to be harmlessly called
       when the run is not in progress.

7.1-002-004 - 
	Fixed misc. problems with Stager and with ReadoutGui
        to make these more production quality.

7.1-001  2/11/03: 
  - ./configure.in  - Fix an error in the search for the SBS/Bit3 headers.
    the script would fail if the initial set of directories did not contain
    the headers...even if the secondary search set did.
  - VMEApi/Makefile.am
    VMEApi/SBSBIT3API.h  - this file was mis-named and should have been called
	SBSBit3API.h  (note difference in capitalization).  The file has been
        renamed and Makefile.am fixed up to produce an appropriate tarball.
  - Stager/directories.tcl - Modified to support a BUFFERSIZE environment
	variable that can be used to modify the behavior of 
	ExpFileSystem::GenRunFile in the event the user has overidden the 
	default daq buffersize

7.1-002 3/2/03:
-   Correct the name of the Vme API library.
-   No longer set the busy when scalers are being read as that can
    cause false triggers in the case where the user is using the busy
    as the trigger signal.

7.1-003 3/17/03
	ReadoutGUI defect fix:  If a link to the event file already exists 
	in the ~/experiment/current directory at the start of a recorded run, 
	the run start fails.  Fixed by removing such links if required.

	ReadoutGUI defect fix:  If readout is being recompiled as it runs, 
	ReadoutGUI can hang or readout can die.  Fixed by copying readout 
	program to 'private hidden' directory first.

	Added production readout software to the autoconf build, along with 
	its documentation.

7.1-004 3/23/03
	This release adds the SBS/Bit3 device driver to the build.  
	 SBS/Bit3 has kindly released the source code of this driver for 
	open distribution so long as redistribution includes acknowledgement 
	of the SBS Technologies copyright.

	From now on, it will be necessary to be root to build the system 
	in order to get the device driver properly installed.

	Changes:
	- Minor bug fixes.
	- SBS/Bit3 device driver included in the build.

7.1-005 3/31/03
    -  Allow Readout/Active.cpp Active::EndRun to be harmlessly called
       when the run is not in progress.

NSCLDAQ-7.2

7.2    ??/??/??
    - Support multi-crate configurations of the CAENCard and CAENChain
      modules.
    - Support for the CAEN V890 multihit tdc.
    - Many stager bugs fixed.  to alloow multiple hits

7.2.2 12/05/03
   - Abstracting the device support libraries from the Readout software.

7.2.2-001 12/05/03
   - Stager: At install time create a package InstallRoot that allows
     us to figure out where we're installed (needed to reliably locate
     eventlog e.g.).

NSCLDAQ- 7.3

7.3    12/05/03
    - Incorporate the CAEN V812 CFD GUI developed by Ron Fox,
      Mike Famiano, and Anton Zalessov:
       $(prefix)/contrib/caenv812.
    - Incorporate scripted readout engine developed initially for
      LLNL, LBL then SEE and RPI by Ron Fox.
    - Added bunches of stuff to the contrib directory for scriptable readout.


7.3-005 3/3/04
    - Did a merge with the 7.4 branch for:
       framework
       controlpush ...
       ProductionReadout
       configure.in
       Makefile.am
     in order to get the controlpush functionality and readout fixes that
     go along with it.
    - Fix incorrect base address for vme trigger/status module was
      0xf000 sb. 0x444400
7.3-006 3/10/04
   - Merge production readout with 7.4 branch to incorporate fix for
     issue 116: Title, run variable and state variable values that are too
     large cause all sorts of grief.
7.3-007 3/24/04
   - Merge Scaler client from 7.4 to catch a long standing issue I'd
     forgotton about: Update needs to be called even if there are no
     scalers (if only to keep track of run time).
   - Merge Production readout with 7.4 branch to incorporate fix for
     issue 106: Elapsed run time incorrect.
7.3-008 3/31/04
   - Merge in the fixes to the Stager/ReadoutGui that constitute the fix
     for issue 108: Event files can be ovewritten with no prompt.
   - Merge in fix for production readout - stabilization of scaler readout timings.
7.3-008 4/12/04
   - Added build stamp to the installation procedure
   - Fixed an incompatibility with tcl 8.4 and cratelocator.tcl
   - Fixed controlpush - plc channels need extra time to connect
   - Added # escaping to controlpush and to production readout
7.3-009 4/18/04
   - Modify Stager so that it can record tape on a different node than
     it records ftp data.
   - Issue 112: Warn the user if the scaler client is started with the default
     data source.  At the NSCL this is an unusual occurence.  Note that
     the warning will be sent via an Xwindows window if possible or if not
     via stderr.
7.3-010 
   - Modify VMEPtr.cpp - was ignoring the crate number.!!!
   - TCLList.cpp - needs to use Tcl_Free not free() for TCL 8.4 and higher.
   - DiskRun - Had an error with strlen that clobbered stack occaisonally.
   - Recover lost version of sis3300 software.
   - Add -p to untar that creates ~/experiment/runx directories..
     otherwise the file permissions are governed by umask.

7.3-011
   - Fix defect 139 - non numerics in readoutgui run number field cause
     failure in status line; added validator to prevent run number field
     from becoming non-numeric.
7.3-012
   - Allow caennet controllers to live in any VME crate (caennet.tcl).
   - Fix defect 143 - last scaler has incorrect value from sclclient.
7.3-014
   - Fix defect in production readout. was not calling scaler initializtions.
7.3-015
   - Fix defect in vmetcl build - was linking vmelibs from install dir
     rather than build dirs.
   - Increase controlpush connection timeouts, had some intermittent
     connection failures.
7.3-016
   - ProductionReadout/CReadoutMain.cpp must define main() if spectrodaq_main()
     is defined, otherwise, TCL++'s main get's pulled in first since
     main was separated into a different module of spectrodaq.

7.3-017
   - Ensure that -lbtp is prior to spectrodaq ld flags so that we don't
     have any undefs from pthread.


NSCLDAQ  7.4:

- Added program controlpush to push EPICS controls data into tcl server
  programs (e.g. ProductionReadout too).
- Fixed several issues with Production Reaodut's tcl server:
  o Added tcl command error reporting.
  o Correctly handled the case where multiple lines are available on the
    socket.
- ProductionReadout - quote and escape the contents of runvariables and
  statevariables so that arbitrary characters like [ can appear in the
  variable values.
- Framework CSocket::Bind - prior to bind(), enable 
   SO_REUSEADDR to deal with lingering sockets if e.g. readout exits and then
   restarts soon.
- Fix incorrect base address of VME trigger/status module was 0xf000 s.b.
  0x444400 (production readout)
- Fix issue 076: Elapsed time from readout classic is not correct.
- Fix issue 116: Titles, runvars and statevars that don't fit can cause
  a great deal of grief.
- Fix issue 106: Elapsed time from runs is not correct for production rdo.
- Added -rpath on Makefiles for scripted readout and scaler server so user
  does not need to worry about the location of shared libs. Stabilized
  the actual timer trigger so that the latency is unimportant.
- Fix issue 108: Event data files can be overwritten without any prompts.
                 Added to this fix for disabled entry widget poor contrast.
- Put -rpaths in all the Makefiles so we don't need LD_LIBRARY_PATH
  and we always get the right directory.
- Use includes in skeleton makefiles to try to isolate stuff we might modify
  from stuff the user might modify.
- Add a build stamp to the installation procedure.
- Fix incompatibility (bug 121) with Tcl 8.4 for cratelocator.tcl
- Allow plc channels longer to connect in controlpush, and the heck
  with looking for units for them.
- In both controlpush and production readout, add # to the set of 
  characters escaped when writing TCL scripts.
- Added dvdburn product shamelessly stolen from what I did for SEE.
- Support writing tape on a different host than ftp'd to.
- Add design by contract headers (Headers/DesignByContract.h).
  In readout software catch DesignByContractException s that may be thrown
  as a result of user code.
- Issue 112: If sclclient is started with a local data source. Warn using
  X11 if possible or stderr if not.
- VMEPtr.cpp -was ignoring the crate parameter.
- For TCL 8.4 and later it's not so safe to call free(), for stuff
  that came from Tcl_SplitList, better to call Tcl_Free, otherwise I have
  seen segfaults.
- Fix some doxygen errors in Framework.
- CIntConfigParam.cpp - suport unsigned 32 bits as well as signed.
- CCAENModule.cpp - make "waitloops" for data ready adjustable.
- Fix DiskRun stack clobber problem.
- Add -p to tar in Experiment.tcl that creates the ~/experiment/runn dirs.
  otherwise user's umask can modify the output permissions.
- Issue 115: do non-blocked writes to spectcldaq's output pipe, and \
  analyze the returns thoroughly to try to remove the occaisional hung
  spectcldaq process.
- Issue 109 Provide mechanism to hide ReadoutShell's parameters.
- Added support for CAENV1190/1290 TDC module.
  o Correct the bad info about the leading/trailing edge detect Carlo gave me.
- Repair defect 138: Scripted Readout leaks file descriptors.  I had
  had problems getting rid of the old configuration at begin of run and
  had decided to live with the memory leak, but it turns out that also
  leaks file descriptors as module objects stay around and those run out
  first.
- Repair defect 139 - Non numerics in run number cause status line of
  readout gui to blow up.
- Added daqstart program... support starting a program with logging and
  exit notification.
Week of July 26, 2004:
- Added man page for daqstart -> $prefix/man/man1.
- Added daqman command to retrieve daq man-pages.
- Support caennet controllers in any crate number.
Week of August 2, 2004:
- Added support for CES8210's in crates other than 0 for camac.tcl.
Week of August 9, 2004
- Added support for Wiener VC/CC32 camac controllers in multiple
  VME crates to tcl support.  This completes the fix for
  Enhancement request BZ 136 (http://daqbugs.nscl.msu.edu/show_bug.cgi?id=136).
Week of August 16, 2004
- Put CopyIn support back into CAENcard.cpp to improve
  performance for e.g. scripted readout.  NOTE: Users
  must have Spectrodaq 0.8.1-001 at the earliest as prior
  versions of Spectrodaq have CopyIn broken or missing.
  (Missing is not so bad as conditional compilations will
   fall back to word by word copy... broken is bad since
   it segfaults).
- Bring scaler display software into mainline part of distribution.
- Add man page for sclclient.
- Add man page for bufdump.
- Add man page for tclserver
- Fix defect 140: Support multiple VME crates for shaper GUI:  
  Also did a whole bunch of common code factorization out into shaperapp.tcl.
  the GUI's are now only shadows of their former selves, and shaperapp16.tcl
  is as well
Week of August 30
- Added eventlog manpage.
- Added log of run start time in ascii end of run report for ScalerDisplay
- Import vhqpanel from see and make it multicrate clean.
Week of Sept. 6
- Added man page for Vme TCL loadable package.
- Added man page for caennet TCL loadable package.
- Added man page for vhq TCL loadable package.
Week of Sept. 20
- Fix defect in Production readout: CExperiment never invokes the scaler
  initialization function.
- Add manpage for camac package (CES 8210).
Week of Sept. 27
- Fix defect in build: vmetcl was linking btp e.g. from the install dirs
  rather than the build dirs causing errors for make (not make install) on
  systems that had never been installed on before.
- Increase connection timeouts of controlpush. some were intermittently not
  connecting.
Week of October 25, 2004
- Add TCL_STUBFLAGS make variable that is the link flags to link a tcl extension
  against the tcl stub library.
- Link the vme access extension against the stub lib to make it starkit compatible.
- Allow a find on static tcl libs without requiring dynamic libs.

NSCLDAQ-8.0

Week of November 1:
    - Add feature tests to support port to gcc/g++ 3.x
    - Add some feature headers (Iostream.h, Ostream.h) to do 
      compiler independent #includes for the corresponding c++ library
      includes (with or without the .h ...).
    - Port CopyrightTools -> 3.x
    - Port Exception      -> 3.x
    - Port daqstart       -> 3.x
    - Port TcpHoist       -> 3.x (note found/fixed defect).
    - Port SpecTclDAQ     -> 3.x 
    - Port DiskRun        -> 3.x

Initial port to gcc/g++ 3.x  Note that this version can be compile on either 
3.x or prior compilers. There is, however a version dependency with spectrodaq.
spectrodaq-0.8.x.y and earlier will only compile with 2-ish compilers. 
spectrodaq-pregt is th first version that compiles with 3.x

The port includes a few additions that can be triggered at compile time:

--enable-cppunit  - If the cppunit package can be located, this switch
                    enables the compilation of cppunit based tests for
                    some directories.  Within those diretories, unit tests
	            can be run via make check-TESTS.
--with-vme-interface=dev  Allows the selection of one of the following
	            PCI/VME interfaces depending on the value of dev:
                     sbs    - SBS/Bit3 PCI/VME interface.
                     wiener - Wiener PC/VC32 combination.
		     non    - No VME support is built.
                    Note that not all device support modules are aware of
	            this.
--with-camac=dev  - Allows the selection of one of the following VME/CAMAC
                    interfaces as the default (although support for both is
                    created).
                    CESCAMAC  - Default CAMAC support is CES CBD8210
                    VC32CAMAC - Default CAMAC support is Wiener VC/CC32.


November 24, 2004:
 	Happy Thanksgiving:
	o Completed the port to 3.x compilers
	o Determined that the software can also still compile/run on 2.95
December 28,2004
	The incarnations of CIntConfigParam/CIntArrayParam.cpp need
	to use strtoll instead of ExprLong to work with values above
        the maximum signed int in Tcl 8.4
January 5, 2005
       -  Fix typo that Eric found for me in Readout/Reader.cpp where at init
          time, m_pTrigger was used where m_pBusy was intended.
       -  Add comments to the readout makefiles to describe how to select
          between CAMAC interfaces.
January 11, 2005
       - Remove reference to the nonexistent Preadout style guide in the 
         Preadout docs.
January 14, 2005
       - Fix documentation error in skeleton makefiles - how to get each type
         of CAMAC controller.
January 17, 2005
       - Fix typo in macro name in the skeleton makefile of production readout.
January 24, 2005 
       - Fix typos in goshaper, goshaper16 as well as document the need to
         run this in a spdaq system.
       - Fix up the .cfd sample config files so that they are right
         some needed quoted names others needed crate numbers.