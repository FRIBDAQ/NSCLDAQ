SHELL = /bin/sh

srcdir = @srcdir@
VPATH = @srcdir@

prefix = @prefix@
exec_prefix = @exec_prefix@

bindir = @bindir@
sbindir = @sbindir@
libexecdir = @libexecdir@
datadir = @datadir@
sysconfdir = @sysconfdir@
sharedstatedir = @sharedstatedir@
localstatedir = @localstatedir@
libdir = @libdir@
infodir = @infodir@
mandir = @mandir@
includedir = @includedir@
threadlibs = @thread_libs@

TOPDIR=@TOPDIR@
THREADLIBS=@thread_libs@

XMLTOKLIB=@TOPDIR@/src/lib/libxmltok.a
XMLPARSELIB=@TOPDIR@/src/lib/libxmlparse.a
XMLPLIB=@TOPDIR@/src/lib/libxmloop.a
XMLINCDIR=@TOPDIR@/src/include/xmloop
XMLBASEINCDIR=@TOPDIR@/src/include

INST_LIBDIR=@prefix@/lib/
INST_BINDIR=@prefix@/bin/
INST_XMLTOKLIB=@prefix@/lib/libxmltok.a
INST_XMLPARSELIB=@prefix@/lib/libxmlparse.a
INST_XMLPLIB=@prefix@/lib/libxmloop.a
INST_XMLINCDIR=@prefix@/include/xmloop

FLAGS=@CFLAGS@ -D_REENTRANT=1 -DXML_NS=1 -DXML_DTD=1 -I$(XMLINCDIR) -I$(XMLBASEINCDIR)
CFLAGS=@CFLAGS@ -D_REENTRANT=1 -DXML_NS=1 -DXML_DTD=1 -I$(XMLINCDIR) -I$(XMLBASEINCDIR)
CXXFLAGS=@CXXFLAGS@ -D_REENTRANT=1 -DXML_NS=1 -DXML_DTD=1 -I$(XMLINCDIR) -I$(XMLBASEINCDIR)
CC=@CXX@
CXX=@CXX@
RANLIB=@RANLIB@
AR=@AR@
CP=@CP@
MAKEDEP=@MAKEDEP@ @makedep_header@
TOUCH=@TOUCH@
BININST=@BININST@
DIRINST=@DIRINST@
INSTALL=@INSTALL@
MKDIR=@MKDIR@

%.o: %.cpp
	@echo "Compiling(xmloop): $<"
	$(CXX) -c $(CXXFLAGS) $(CPPFLAGS) -o $@ $<

%.o: %.cc
	@echo "Compiling(xmloop): $<"
	@$(CXX) -c $(CXXFLAGS) $(CPPFLAGS) -o $@ $<

%.o: %.c
	@echo "Compiling(xmloop): $<"
	@$(CXX) -c $(CXXFLAGS) $(CPPFLAGS) -o $@ $<

O_FILES=$(addsuffix .o,$(FILES))
C_FILES=$(addsuffix .cc,$(FILES))

build: all

depend::
	@echo "Creating Dependencies in: $(shell pwd)"
	@:> .depend
	@$(MAKEDEP) -- $(CFLAGS) -- $(C_FILES) 1>/dev/null 2>&1
ifneq (,$(strip $(SUB_DIRS)))
	@for i in $(SUB_DIRS); do (cd $$i; make -s depend); done;
endif

