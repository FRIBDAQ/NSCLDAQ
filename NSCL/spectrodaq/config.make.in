SHELL = /bin/sh

srcdir = @srcdir@
VPATH = @srcdir@

prefix = @prefix@
exec_prefix = @exec_prefix@

bindir = @bindir@
sbindir = @sbindir@
libexecdir = @libexecdir@
datadir = @datadir@
sysconfdir = @sysconfdir@
sharedstatedir = @sharedstatedir@
localstatedir = @localstatedir@
libdir = @libdir@
infodir = @infodir@
mandir = @mandir@
includedir = @includedir@
threadlibs = @thread_libs@
cryptlibs = @crypt_libs@
gtk_libs = @GTK_LIBS@
gtk_cflags = @GTK_CFLAGS@
tcl_libs = @TCL_LIBS@
tcl_cflags = @TCL_CFLAGS@

iface_subdir = @IFACE_SUBDIR@

TOPDIR=@TOPDIR@
THREADLIBS=@thread_libs@
CRYPTLIBS=@crypt_libs@
NSCL_CODE=@prefix@
NSCL_CODE_INC=@prefix@/include/nscl
NSCL_CODE_LIB=@prefix@/lib/libNSCLException.a

DAQLIB=@TOPDIR@/src/lib/libspectrodaq.a
MPILIB=@TOPDIR@/src/lib/libnsclmpi.a
NETIOLIB=@TOPDIR@/src/lib/libnetio.a
DAQTHREADSLIB=@TOPDIR@/src/lib/libdaqthreads.a
CLIENTLIB=@TOPDIR@/src/lib/libdaqclient.a
SERVLIB=@TOPDIR@/src/lib/libdaqserv.a
NSCLLIB=@TOPDIR@/src/lib/libNSCLException.a
XMLOOPLIB=@TOPDIR@/src/lib/libxmloop.a
XMLPARSELIB=@TOPDIR@/src/lib/libxmlparse.a
XMLTOKLIB=@TOPDIR@/src/lib/libxmltok.a
DAQINCDIR=@TOPDIR@/src/include/
NSCLINCDIR=@TOPDIR@/src/include/nscl
MPIINCDIR=@TOPDIR@/src/include/mpi
NETIOINCDIR=@TOPDIR@/src/include/netio
DAQTHREADSINCDIR=@TOPDIR@/src/include/threads
XMLINCDIR=@TOPDIR@/src/include/xmloop

XMLLIBS=$(XMLOOPLIB) $(XMLPARSELIB) $(XMLTOKLIB)

INST_LIBDIR=@prefix@/lib/
INST_BINDIR=@prefix@/bin/
INST_EXMPDIR=@prefix@/examples/
INST_CONFDIR=@prefix@/etc/
INST_DOCDIR=@prefix@/doc/
INST_DAQLIB=@prefix@/lib/libspectrodaq.a
INST_MPILIB=@prefix@/lib/libnsclmpi.a
INST_NETIOLIB=@prefix@/lib/libnetio.a
INST_NSCLLIB=@prefix@/lib/libNSCLException.a
INST_DAQTHREADSLIB=@prefix@/lib/libdaqthreads.a
INST_CLIENTLIB=@prefix@/lib/libdaqclient.a
INST_SERVLIB=@prefix@/lib/libdaqserv.a
INST_XMLOOPLIB=@prefix@/lib/libxmloop.a
INST_XMLPARSELIB=@prefix@/lib/libxmlparse.a
INST_XMLTOKLIB=@prefix@/lib/libxmltok.a
INST_DAQINCDIR=@prefix@/include/
INST_MPIINCDIR=@prefix@/include/mpi
INST_NSCLINCDIR=@prefix@/include/nscl
INST_NETIOINCDIR=@prefix@/include/netio
INST_DAQTHREADSINCDIR=@prefix@/include/threads
INST_DAQDOCDIR=@prefix@/doc
INST_XMLINCDIR=@prefix@/include/xmloop

INST_XMLLIBS=$(INST_XMLOOPLIB) $(INST_XMLPARSELIB) $(INST_XMLTOKLIB)

FLAGS=@CFLAGS@ @TCL_CFLAGS@ -D_REENTRANT=1 -I$(DAQINCDIR) -I$(NSCLINCDIR) -I$(XMLINCDIR)
CFLAGS=@CFLAGS@ @TCL_CFLAGS@ -D_REENTRANT=1 -I$(DAQINCDIR) -I$(NSCLINCDIR) -I$(XMLINCDIR)
CXXFLAGS=@CXXFLAGS@ @TCL_CFLAGS@ -D_REENTRANT=1 -I$(DAQINCDIR) -I$(NSCLINCDIR) -I$(XMLINCDIR)
CC=@CXX@
CXX=@CXX@
RANLIB=@RANLIB@
AR=@AR@
CP=@CP@
MAKEDEP=@MAKEDEP@ @makedep_header@
TOUCH=@TOUCH@
BININST=@BININST@
DIRINST=@DIRINST@
INSTALL=@INSTALL@
MKDIR=@MKDIR@
DOXYGEN=@DOXYGEN@

LIBS=$(NSCLLIB)
LDFLAGS=$(NSCLLIB)

%.o: %.cpp
	@echo "Compiling: $<"
	$(CXX) -c $(CXXFLAGS) $(CPPFLAGS) -o $@ $<

%.o: %.cc
	@echo "Compiling: $<"
	@$(CXX) -c $(CXXFLAGS) $(CPPFLAGS) -o $@ $<

%.o: %.c
	@echo "Compiling: $<"
	@$(CXX) -c $(CXXFLAGS) $(CPPFLAGS) -o $@ $<

O_FILES=$(addsuffix .o,$(FILES))
C_FILES=$(addsuffix .cc,$(FILES))

build: all

depend::
	@echo "Creating Dependencies in: $(shell pwd)"
	@:> .depend
	@$(MAKEDEP) -- $(CFLAGS) -- $(C_FILES) 1>/dev/null 2>&1
ifneq (,$(strip $(SUB_DIRS)))
	@for i in $(SUB_DIRS); do (cd $$i; make -s depend); done;
endif

