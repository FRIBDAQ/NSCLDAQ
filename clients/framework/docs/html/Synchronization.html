<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Guest event loop synchronization</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.15 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><a name="Synchronization"><h2>Guest event loop synchronization</h2></a>

<p>
The framework supports the existence of exactly one guest event loop.  The event loop supported are:<ul>
<li>Tcl event loops.<li>Tk Event loops.<li>X11/Xt event loops</ul>
The first two synchronize differently than the X11/Xt event loops:
<p>
<a name="TCLSynchronization"><h2>Tcl and Tk event loop synchronization</h2></a>

<p>
Most of the built in Tcl/Tk commands require no application synchronization.  For example, setting a variable is an essentially atomic action and in most cases does not involve interaction with other event threads. User command extensions are another matter however. It is assumed that user command  extensions may be used to control other event threads executing in the  framework. Therefore, user command extensions should be implemented as  derived classes from <a class="el" href="classCDAQTCLProcessor.html">CDAQTCLProcessor</a> rather than from <a class="el" href="classCTCLProcessor.html">CTCLProcessor</a>.
<p>
The <a class="el" href="classCDAQTCLProcessor.html">CDAQTCLProcessor</a> jackets the call to operator() with a lock and unlock of the global serialization mutex. This forces the command's execution to be synchronized to the  application.
<p>
There may be some application specific scripts which require syncronization to the application (for example modification of related variables). The sync command can be added to the interpreter by instantiating and registering an instance of a <a class="el" href="classCTCLSynchronizeCommand.html">CTCLSynchronizeCommand</a>. The sync command allows a script to be syncronized to the application. For example:
<p>
<div class="fragment"><pre>sync {                  ;# Synchronized script begins.
  set var1  $thing
  set var2 [Relationship $var1]
}                       ;# Synchronized script ends.
</pre></div>
<p>
<a name="XTSynchronization"><h2>X11/Xt Syncronization</h2></a>

<p>
The class <a class="el" href="classCXtEventLoop.html">CXtEventLoop</a> provides a base class for implementing X11/Xt event  loops in a synchronized manner. Since Xt operates by associating arbitrary application specific callbacks with events in the GUI, potentially and GUI event can trigger code which must be synchronized.
<p>
The <a class="el" href="classCXtEventLoop.html">CXtEventLoop</a> encapsulates an event loop which brackets the dispatch of a GUI event with synchronization calls. The main loop for examples looks like:
<p>
<div class="fragment"><pre>           <font class="keywordflow">while</font>(1) {
              XtGetEvent()
              LockMutex()
              XtDispatchEvent();
              UnlockMutex();
             yield();                         <font class="comment">// Let someone else run.</font>
           }
</pre></div>
<p>
The call to LockMutex() enters application synchronized code. After this call the GUI event is dispatched to its application specific callback via the call to XtDispatchEvent(). On return, UnlockMutex() marks the end of  syncronized execution.
<p>
<hr><address align="right"><small>Generated on Wed Feb 5 13:40:38 2003 for Spectrodaq External Event Framework by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.15 </small></address>
</body>
</html>
