CFLAGS += -I`pwd` -DBT1003 -D__linux__ -D__KERNEL__ -fno-common 

SOURCES=btp_cfg.c btp_open.c btp_rdwr.c btp_mmap.c btp_ioctl.c \
    btp_lowio.c btp_version.c btp_bind.c \
    bt_mem.c bt_mutex.c bt_event.c bt_bit.c bt_llist.c bt_delay.c bt_rwlck.c \
    bt_icbr_thread.c bt_isr.c bt_nbus.c bt_param.c bt_setup.c bt_xfer.c bt_diag.c

OBJECTS = $(SOURCES:.c=.o)

default:
	echo ${KERNEL_SOURCE}
	make -C ${KERNEL_SOURCE} SUBDIRS=`pwd` modules

clean:
	rm -f *.o

obj-m := btp.o
btp-objs :=  $(OBJECTS)

