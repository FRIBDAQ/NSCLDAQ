<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>Building a SpectroDAQ Client</title>
</head>
<body bgcolor="#ffffff" text="#000000">
<DIV align="center">
<TABLE bgcolor="#000000" width="100%" cellpadding="2" cellspacing="0" border="0">
<TR><TD>
<TABLE bgcolor="#ffffff" width="100%" cellpadding="3" cellspacing="0" border="0">
<TR><TD align="center">
<font face="helvetica" size="6"><strong>Building a Simple SpectroDAQ Client</strong></font><br>
<font face="helvetica" size="-1"><strong>February 23, 2001</strong></font>
</TD></TR>
</TABLE></TD></TR></TABLE>
</DIV>
<P>
This section discusses the basics of constructing a simple SpectroDAQ client.
This will help lay the groundwork for later sections where further
functionality of the SepectroDAQ system is discussed.  Although the
program presented here is yet another version of the ubiquitous 
hello world, it will help outline the client framework and how to
properly compile and link a client.

<P>
Covered in this section is how to use the <TT>spectrodaq-conf</TT> utility.
This is followed by coding a simple client program in C++ and a 
<TT>Makefile</TT> to compile this code into an executable program. 
It is assumed that the reader has some previous familiarity with C/C++ and
the make utility (although it is not necessary to be an expert).

<P>
<DIV align="center">
<TABLE bgcolor="#000000" width="80%" cellpadding="2" cellspacing="0" border="0">
<TR><TD>
<TABLE bgcolor="#c0c0c0" width="100%" cellpadding="3" cellspacing="0" border="0">
<TR><TD align="center">
<I><strong>Note: A Word About Conventions...</strong></I>
</TD></TR>
<TR><TD align="left">
<ul>
<li>Typically, grey, bordered boxes (such as this one) will be used for
    presenting notes or asides about the subject being discussed.</li>
<li>White, bordered boxes are used to show tables, code examples or
    commands.</li>
<li>The characters <TT>%&gt;</TT> denotes a command prompt.  You do
    not type this prompt when executing example commands.</li>
<li><strong><TT>Bold</TT></strong> face indicates a command that can be
    typed or a program flag within the context of command execution.
    (commands are usually preceded by a <TT>%&gt;</TT>.)</li>
<li><TT>Terminal type</TT> face typically indicates program code.</li>
<li>Often program code is preceded by <strong>bold</strong> line 
    numbers.  Unless otherwise noted, you should not type these line
    numbers when typing example code.</li>
<li>Special characters, such as tabs, spaces and carriage returns, are
    represented capitalized between angle brackets.  For instance the
    keyboard tab will be show as <TT>&lt;TAB&gt;</TT>.</li>
</ul>
</TD></TR>
</TABLE></TD></TR></TABLE>
</DIV>
<P>

<DIV align="left">
<font face="helvetica" size="5"><strong><u>Using the <TT>spectrodaq-conf</TT> Utility</u></strong></font>
</DIV>
<P>
The <TT>spectrodaq-conf</TT> utility is used to query the SpectroDAQ system
about the current installation's location and use.  Initially, you need to
know where to find this utility, from there you can use <TT>spectrodaq-conf</TT>
to display all the other information you will need to build a SpectroDAQ
client.  This utility is found in the <TT>bin</TT> directory under the
SpectroDAQ system's installation root.  Typically, at the NSCL, SpectroDAQ
is installed in <TT>/opt/spectrodaq</TT> and <TT>spectrodaq-conf</TT> can
be executed by typing (Note be sure to check out the
conventions mentioned in the box above):

<P>
<DIV align="center">
<TABLE bgcolor="#000000" width="80%" cellpadding="2" cellspacing="0" border="0">
<TR><TD>
<TABLE bgcolor="#ffffff" width="100%" cellpadding="3" cellspacing="0" border="0">
<TR><TD align="left">
<TT>%&gt;<strong>/opt/spectrodaq/bin/spectrodaq-conf</strong></TT><br>
<TT>/opt/spectrodaq/bin/spectrodaq-conf Options are:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--daqdir --nscldir --daqbin --daqlib --daqinc --nscllib<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--nsclinc --libs --clientlibs --servlibs --cflags --bin<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--xmlclientlibs<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--version --serverversion --clientversion --help</TT>
</TD></TR>
</TABLE></TD></TR></TABLE>
</DIV>
<P>

Executing the above command will cause <TT>spectrodaq-conf</TT> to
display its command line options (equivalent to using the <TT>--help</TT>
flag).  Notice that there are command line options that
can be used to find out various useful facts regarding the 
SpectroDAQ installation. 

<P>
<DIV align="center">
<TABLE bgcolor="#000000" width="80%" cellpadding="2" cellspacing="0" border="0">
<TR><TD>
<TABLE bgcolor="#ffffff" width="100%" cellpadding="3" cellspacing="0" border="0">
<TR><TD align="left">
<TT>%&gt;<strong>/opt/spectrodaq/bin/spectrodaq-conf --clientversion</strong></TT><br>
<TT>0.3.4k</TT> 
</TD></TR>
</TABLE></TD></TR></TABLE>
</DIV>
<P>

Above is another example that will display the client version
of the SpectroDAQ installation.  You might also want to try
the <TT>--version</TT> and <TT>--serverversion</TT> options, or
maybe both the <TT>--serverversion --clientversion</TT> flags at
the same time.

<P>
<DIV align="center">
<TABLE bgcolor="#000000" width="80%" cellpadding="2" cellspacing="0" border="0">
<TR><TD>
<TABLE bgcolor="#ffffff" width="100%" cellpadding="3" cellspacing="0" border="0">
<TR><TD align="center">
<TABLE BORDER="2" CELLSPACING="0" CELLPADDING="3" width="98%">
  <TR><TD ALIGN="left"><STRONG>--bin</STRONG></TD><TD ALIGN="left">Display the SpectroDAQ executable (bin) directory</TD></TR> 
  <TR><TD ALIGN="left"><STRONG>--cflags</STRONG></TD><TD ALIGN="left">Displays the C flags needed to compile a client program</TD></TR> 
  <TR><TD ALIGN="left"><STRONG>--clientlibs</STRONG></TD><TD ALIGN="left">Display the linking flags necessary to link a client program</TD></TR> 
  <TR><TD ALIGN="left"><STRONG>--clientversion</STRONG></TD><TD ALIGN="left">Display client version number</TD></TR> 
  <TR><TD ALIGN="left"><STRONG>--daqbin</STRONG></TD><TD ALIGN="left">Synonym for --bin</TD></TR> 
  <TR><TD ALIGN="left"><STRONG>--daqdir</STRONG></TD><TD ALIGN="left">Display the directory where SpectroDAQ is installed</TD></TR> 
  <TR><TD ALIGN="left"><STRONG>--daqinc</STRONG></TD><TD ALIGN="left">Display the location of the SpectroDAQ header (include) directory</TD></TR> 
  <TR><TD ALIGN="left"><STRONG>--help</STRONG></TD><TD ALIGN="left">Quick command line help</TD></TR> 
  <TR><TD ALIGN="left"><STRONG>--libs</STRONG></TD><TD ALIGN="left">Display the linking flags necessary to link a SpectroDAQ server or client</TD></TR> 
  <TR><TD ALIGN="left"><STRONG>--nscldir</STRONG></TD><TD ALIGN="left">Display the directory where the common NSCL code used by SpectroDAQ is installed (usually in the SpectroDAQ install directory)</TD></TR> 
  <TR><TD ALIGN="left"><STRONG>--nsclinc</STRONG></TD><TD ALIGN="left">Display the directory where the common NSCL headers are installed (usually in the SpectroDAQ install directory)</TD></TR> 
  <TR><TD ALIGN="left"><STRONG>--nscllib</STRONG></TD><TD ALIGN="left">Display the NSCL common code library</TD></TR> 
  <TR><TD ALIGN="left"><STRONG>--servlibs</STRONG></TD><TD ALIGN="left">Synonym for --libs</TD></TR> 
  <TR><TD ALIGN="left"><STRONG>--serverversion</STRONG></TD><TD ALIGN="left">Display server version number</TD></TR> 
  <TR><TD ALIGN="left"><STRONG>--version</STRONG></TD><TD ALIGN="left">Display client/server version numbers</TD></TR> 
  <TR><TD ALIGN="left"><STRONG>--xmlclientlibs</STRONG></TD><TD ALIGN="left">Display the linking flags necessary to link a client that uses XML</TD></TR> 
</TABLE>
</TD></TR>
<TR><TD align="center">
<hr>
<I>spectrodaq-conf command line options</I>
</TD></TR>
</TABLE></TD></TR></TABLE>
</DIV>
<P>

Here's a table that describes all of the possible <TT>spectrodaq-conf</TT>
command line options.  Pay particular attention to the <TT>--cflags</TT>
and <TT>--libs</TT> options since we will be using these later.  It is
worth mentioning that the order that the libraries are presented in
when the <TT>--libs</TT> option or one its cousins (such as 
<TT>--clientlibs</TT>) is significant.  If for some reason it is
necessary to compile or link a client program without using the
<TT>spectrodaq-conf</TT> utility, care should be taken to guarantee that
the order of the libraries and library paths is maintained.  Otherwise,
the compilation or link may fail.

<P>
<DIV align="left">
<font face="helvetica" size="5"><strong><u>Coding an Example Hello World Program</u></strong></font>
</DIV>

<P>
In this section an example hello world program is presented.  This program
is coded in C++, showing the basic features of a SpectroDAQ client
program.  Remember, when typing in this example, don't enter the
the <strong>bold</strong> face line numbers.

<P>
<DIV align="center">
<TABLE bgcolor="#000000" width="80%" cellpadding="2" cellspacing="0" border="0">
<TR><TD>
<TABLE bgcolor="#ffffff" width="100%" cellpadding="3" cellspacing="0" border="0">
<TR><TD align="left">
<DIV ALIGN="left">
<FONT FACE="courier">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0">
  <TR><TD ALIGN="right"><STRONG>    1.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>#include&nbsp;&lt;stdlib.h&gt;</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>    2.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>#include&nbsp;&lt;stdio.h&gt;</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>    3.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>#include&nbsp;&lt;iostream.h&gt;</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>    4.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>#include&nbsp;&lt;iomanip.h&gt;</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>    5.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT></TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>    6.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>#include&nbsp;&lt;spectrodaq.h&gt;</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>    7.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT></TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>    8.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>/*===============================================*/</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>    9.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>//&nbsp;HelloWorld&nbsp;class&nbsp;definition</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>   10.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>//</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>   11.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>class&nbsp;HelloWorld:&nbsp;public&nbsp;DAQROCNode&nbsp;{</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>   12.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>&nbsp;&nbsp;int&nbsp;operator()(int&nbsp;argc,char&nbsp;**argv)&nbsp;{</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>   13.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>&nbsp;&nbsp;&nbsp;&nbsp;cout&nbsp;&lt;&lt;&nbsp;"Hello&nbsp;World!!!"&nbsp;&lt;&lt;&nbsp;endl;</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>   14.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>&nbsp;&nbsp;}&nbsp;</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>   15.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>};</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>   16.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT></TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>   17.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>/*===============================================*/</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>   18.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>//&nbsp;Instantiate&nbsp;the&nbsp;HelloWorld</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>   19.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>HelloWorld&nbsp;myHelloWorld;</TT></TD></TR>
</TABLE>
</FONT>
</DIV>
</TD></TR>
<TR><TD align="center">
<hr>
<I>helloworld.cc: Hello World ROC node C++ code</I>
</TD></TR>
</TABLE></TD></TR></TABLE>
</DIV>
<P>

Let's take a look at the anatomy of this <TT>helloworld.cc</TT> code.
First, notice line <strong>6</strong>.  It is important that the
client code includes the <TT>spectrodaq.h</TT> header.  This header
file instantiates the definitions that are necessary to build a 
SpectroDAQ client.
<P>
Lines <strong>11</strong> through <strong>15</strong> make up the
<TT>HelloWorld</TT> class definition.  Notice that <TT>HelloWorld</TT>
inherits (publicly) from a <TT>DAQROCNode</TT>.  This very 
important.  If you do not inherit from a <TT>DAQROCNode</TT>, much
of the client nodes functionality will be missing or uninitialized.
This will typically result in an execution failure.
<P>
Make note of the <TT>operator()</TT> method on line <strong>12</strong>.
This method is much like C's <TT>main()</TT> function.  It is necessary
that some functionality be added to this method even if all that is done
is to instantiate and pass control to another object.
Also, this method is passed the <TT>argc</TT> and <TT>argv</TT> that are
supplied on the command line when the program is executed.  A program
that requires command line arguments will need to parse this method's
<TT>argc</TT> and <TT>argv</TT> much like is done for those
passed to C's <TT>main()</TT>.
<P>
Finally, it is necessary to instantiate the <TT>HelloWorld</TT>
class.  It is only necessary to instantiate an object of this type
as shown on line <strong>19</strong>.  Upon execution, control will
be automatically passed to the <TT>HelloWorld::operator()</TT>
method.  If you do not instantiate an object based on the 
<TT>DAQROCNode</TT> class,  the program will likely compile but will
fail on execution (a message indicating that <I>"DAQSys is not initialized"</I>
followed by a segfault is likely.)

<P>
<DIV align="left">
<font face="helvetica" size="5"><strong><u>Creating a Makefile for the Hello World Program</u></strong></font>
</DIV>
<P>

In this section, a <TT>Makefile</TT> for the preceding <TT>helloworld.cc</TT>
program is presented.  A <TT>Makefile</TT> is a set of instructions and
rules that are used to properly build an executable program or some other
computer based packages (i.e. you could use a <TT>Makefile</TT> to 
assemble the pieces of a LaTex document into a Postscript file).  
<TT>Makefiles</TT> are used by the <TT>make</TT> program.  Typically,
<TT>make</TT> will read a make file by the name of <TT>Makefile</TT> or
<TT>makefile</TT> in the current directory.  Often the <TT>-f</TT> flag
can be used to coerce <TT>make</TT> into using a particular file name 
instead of the defaults.

<P>
<DIV align="center">
<TABLE bgcolor="#000000" width="80%" cellpadding="2" cellspacing="0" border="0">
<TR><TD>
<TABLE bgcolor="#ffffff" width="100%" cellpadding="3" cellspacing="0" border="0">
<TR><TD align="left">
<DIV ALIGN="left">
<FONT FACE="courier">
<TABLE BORDER="0" CELLSPACING="0" CELLPADDING="0">
  <TR><TD ALIGN="right"><STRONG>    1.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>#</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>    2.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>#&nbsp;&nbsp;Makefile&nbsp;to&nbsp;build&nbsp;the&nbsp;helloworld&nbsp;example&nbsp;program</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>    3.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>#</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>    4.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>SPECTRO_FLAGS=$(shell&nbsp;/opt/spectrodaq/bin/spectrodaq-conf&nbsp;--cflags)</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>    5.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>SPECTRO_LDFLAGS=$(shell&nbsp;/opt/spectrodaq/bin/spectrodaq-conf&nbsp;--libs)</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>    6.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT></TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>    7.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>CFLAGS=-g2&nbsp;-ggdb&nbsp;$(SPECTRO_FLAGS)</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>    8.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>LDFLAGS=$(SPECTRO_LDFLAGS)&nbsp;</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>    9.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT></TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>   10.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>CXX&nbsp;=&nbsp;g++&nbsp;$(CFLAGS)</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>   11.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>CC&nbsp;=&nbsp;gcc&nbsp;$(CFLAGS)</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>   12.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT></TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>   13.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>all&nbsp;:&nbsp;helloworld</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>   14.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT></TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>   15.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>helloworld:&nbsp;helloworld.cc</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>   16.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$(CXX)&nbsp;-o&nbsp;$@&nbsp;helloworld.cc&nbsp;$(LDFLAGS)</TT></TD></TR>
  <TR><TD ALIGN="right"><STRONG>   17.</STRONG>&nbsp;&nbsp;</TD><TD ALIGN="left"><TT></TT></TD></TR>
</TABLE>
</FONT>
</DIV>
</TD></TR>
<TR><TD align="center">
<hr>
<I>Makefile: Makefile for helloworld.cc</I>
</TD></TR>
</TABLE></TD></TR></TABLE>
</DIV>
<P>

Now, let's look at the anatomy of this <TT>Makefile</TT>.  First, notice
lines <strong>1</strong> through <strong>3</strong>.  Each of these lines
has a <TT>#</TT> as the first character of the line and thus, everything
following on that line is considered a command and ignored by <TT>make</TT>. 
(blank lines, such as <strong>6</strong> and <strong>9</strong> are also
ignored.)
<P>
Lines <strong>4</strong> and <strong>5</strong> show how the proper
flags for compiling and linking the <TT>helloworld.cc</TT> program
can be obtained using the <TT>spectrodaq-conf</TT> utility.  The results
from calling <TT>spectrodaq-conf</TT> with the <TT>--cflags</TT> and
<TT>--libs</TT> flags are assigned to the variables 
<TT>SPECTRO_FLAGS</TT> and <TT>SPECTRO_LDFLAGS</TT> respectively.
These variables are later used on lines <strong>6</strong> and
<strong>7</strong> where they are assigned to the variables
<TT>CFLAGS</TT> and <TT>LDFLAGS</TT>.  This reassignment was
done so that it would be easier to add other application specific
flags to the compilation and linking flags.  Notice that the flags
<TT>-g2 -ggdb</TT> were added to <TT>CFLAGS</TT>.  This was done
to add debugging symbols to the compiled <TT>helloworld</TT>
executable.  Equally, you might later want to add a 
<TT>-lm</TT> flag to the <TT>LDFLAGS</TT> if you make use of
any of the math functions in one your programs.
<P>
The C++ and C compilers are defined on lines <strong>10</strong> 
and <strong>11</strong> as being <TT>g++</TT> and <TT>gcc</TT>
(the GNU compilers) respectively.  Note, that the <TT>CXX</TT>
and <TT>CC</TT> variables have been extended to include the
<TT>CFLAGS</TT> as defined earlier.
<P>
Line <strong>13</strong> defines the default target as <TT>all</tt>.
Typically, the first target in the <TT>Makefile</TT> is considered
the default target.  A target has three basic components: a target
name, dependencies and rules.  A target doesn't have to have all 
these components.  For instance, the <TT>all</TT> target in the
example has only a dependency (<TT>helloworld</TT>), but no
rules.  This target instructs <TT>make</TT> that it must build
the <TT>helloworld</TT> target to build the default target <TT>all</TT>.
Could we simply eliminate the <TT>all</TT> target in favor of
<TT>helloworld</TT>?  Yes, but we keep a special default target
such that we might build more than one program with this <TT>Makefile</TT>.
For instance, the default target could be changed to:
<TT>all: helloworld someothertarget</TT>.  Then making the default
target would result in both <TT>helloworld</TT> and 
<TT>someothertarget</TT> being built.
<P>
Lines <strong>15</strong> and <strong>16</strong> make up the target
definition for the <TT>helloworld</TT> program.  This target depends
on the source code for the program, <TT>helloworld.cc</TT>.  This
dependency is the actual file name of the program.  <TT>Make</TT>
is clever enough to check file timestamps to determine if it must
rebuild a target.  Thus, editing a source file is often sufficient
to convince <TT>make</TT> to rebuild a program.  It is worth noting that
if files (such as the SpectroDAQ server libraries) are updated and
are not listed as dependencies, it may be necessary to remove the
results of a previous compilation (i.e., delete the executable and 
object or <TT>.o</TT> files created by a previous build) to get a
consistent and complete rebuild of a target.  Mixing code compiled
against two different library versions is not recommended.
<P>
Line <strong>16</strong> is the only rule necessary to build the
<TT>helloworld</TT> executable.  Note, and this is very important,
the first character on a rule line must be a <TT>&lt;TAB&gt;</TT>!
A <TT>&lt;TAB&gt;</TT> character is used to indicate the start
of a rule.  If you have problems with your <TT>Makefile</TT>,
there's a very good chance that a <TT>&lt;SPACE&gt;</TT> has 
found its way into your <TT>Makefile</TT> at the start of
a rule (sometimes happens when you cut-and-paste). 
<P>
The rest of the line instructs <TT>make</TT> to build the
<TT>helloworld</TT> target using the C++ compiler.  The 
output file name (specified using the <TT>-o</TT> flag) being 
<TT>$@</TT>.  <TT>$@</TT> is a special variable name that expands into
the target name (in this case, <TT>helloworld</TT>).  Then comes the
source code file and the flags used for linking.
<P>
<DIV align="left">
<font face="helvetica" size="5"><strong><u>Putting it All Together</u></strong></font>
</DIV>
<P>
Now, a quick discussion on how to compile the <TT>helloworld</TT>
program into an executable.

<P>
<DIV align="center">
<TABLE bgcolor="#000000" width="80%" cellpadding="2" cellspacing="0" border="0">
<TR><TD>
<TABLE bgcolor="#ffffff" width="100%" cellpadding="3" cellspacing="0" border="0">
<TR><TD align="left">
<TT>%&gt;<strong>make</strong></TT><br>
<TT>g++ -g2 -ggdb -D_REENTRANT=1 -I/opt/spectrodaq/include -I/opt/spectrodaq/include/nscl -I/opt/spectrodaq/include/xmloop -o helloworld helloworld.cc -lpthread -L/opt/spectrodaq/lib -lnetio -ldaqclient -lspectrodaq -ldaqthreads -lxmloop -lxmlparse -lxmltok -lpthread -lcrypt -L/opt/spectrodaq/lib -lNSCLException</TT>
</TD></TR>
</TABLE></TD></TR></TABLE>
</DIV>
<P>

Compiling the <TT>helloworld</TT> executable is done simply by typing
<TT>make</TT> as show above.

<P>
<DIV align="center">
<TABLE bgcolor="#000000" width="80%" cellpadding="2" cellspacing="0" border="0">
<TR><TD>
<TABLE bgcolor="#ffffff" width="100%" cellpadding="3" cellspacing="0" border="0">
<TR><TD align="left">
<TT>%&gt;<strong>./helloworld</strong></TT><br>
<TT>Hello World!!!</TT> 
</TD></TR>
</TABLE></TD></TR></TABLE>
</DIV>
<P>

Once the program is compiled, you can execute it as show above.
Congratulations, you've survived this introduction to building
a simple SpectroDAQ client.

<P>
<DIV ALIGN="right">
<font size="-1"><strong>February 23, 2001</strong></font>
<DIV>
</body>
</html>
