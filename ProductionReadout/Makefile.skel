#
#  Makefile for the user's additions to the production readout system.
#
#
#   Prior to using this, you may want to do a:
#
#  makedepend -Y. *.cpp *.c
#
#   This will add the header file dependecies for source file sin this
#   directory to the rear end of the Makefile.
#
#
SPECTRO_FLAGS=$(shell /opt/spectrodaq/bin/spectrodaq-conf --cflags)
SPECTRO_LDFLAGS=$(shell /opt/spectrodaq/bin/spectrodaq-conf --libs)
VME=$(shell $(INSTDIR)/Bin/VmeDevice)
OS=$(shell uname | sed s/-//)
LD=g++
LDFLAGS=-g 


NSCLBIT3LIB=-lVmeAPI
SBSBIT3LIB  = -lVmeAPI -lbtp

#
#  Add any additional linker flags you need here.
#
LIBFLAGS=-L. -L$(INSTDIR)/Lib  -L/usr/X11R6/lib -lPReadout \
	-lEventFramework -lException $($(VME)LIB) -lTclPlus  -lException  \
	$(SPECTRO_LDFLAGS) -ltk -ltcl -lXm -lXt -lX11 -lm -lLicense

#
#  Add any additional compiler flages you need here.
#
COMPILEFLAGS=  -c -ggdb -I. -I$(INSTDIR)/Include  \
	-D$(OS) -I/usr/include/tcl  $(SPECTRO_FLAGS) -DCESCAMAC

CPP=g++ $(COMPILEFLAGS)
CC=gcc $(COMPILEFLAGS)

#
#   Default rule to build an object from a C++ file.
#
.cpp.o:
	$(CPP) $<
#
#  Default rule to build an object from a C file.
#
.c.o:
	$(CC) $<

#
#  Add any additional objects you need to build to this line.
#
Objects=Skeleton.o
#
#   If you are using a 'traditional readout skeleton uncomment the next line:
#Objects= Skeleton.o CTraditionalEventSegment.o CTraditionalScalerReadout.o

Readout: $(Objects)
	$(LD) -o Readout $(LDFLAGS) $(Objects)  $(LIBFLAGS) $(LIBFLAGS)




